{
  "hash": "5f1939b1d44e30c639e00ba40ddf10ca",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"4. Übungsblatt (Faktorielle Umfrageexperimente)\"\nauthor: \"Daria Tisch\"\nformat: \n  html:\n    code-fold: true\n    code-tools: true\n    code-link: true\n    df-print: paged\n    code-line-numbers: true\n  pdf: default\neditor: visual\nnumber-sections: true\n---\n\n\n\n\n\n\n\n\n\n\n\n\n# Organisation\n\n## Arbeitsverzeichnis festsetzen\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n## Packages installieren und laden\n\n\n\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Packages\npkgs <- c(\n  \"tidyverse\",\n  \"sjPlot\",\n  \"haven\",\n  \"labelled\" \n) \n\n## Install uninstalled packages\nlapply(pkgs[!(pkgs %in% installed.packages())], install.packages)\n\n## Load all packages to library\nlapply(pkgs, library, character.only = TRUE)\n```\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n## Einführung\n\nIn dieser Übung replizieren wir die Ergebnisse folgender Studie:\n\nTisch, Daria, and Tamara Gutfleisch. ‘Unequal but Just? Experimental Evidence on Distributive Justice Principles in Parental Inter Vivos Transfers’. Socio-Economic Review 21, no. 3 (2023): 1369–90.\n\nDer Datensatz kann [hier](XXX) heruntergeladen werden.\n\nSchenkungen von Eltern an deren Kinder sind von der moralischen Entscheidung geprägt, welches Kind wie viel erhalten soll. So können Eltern Schenkungen zwischen Kindern nach unterschiedlichen Gerechtigkeitsprinzipien aufteilen. Wenden sie das Gleichheitsprinzip an, schenken sie allen Kindern gleich viel. Wenden sie das Bedürfnisprinzip an, schenken sie den Kindern, die größere Bedürfnisse haben (z. B. Arbeitslosigkeit), mehr. Wenden sie das Austauschprinzip an, schenken sie den Kindern mehr, die im Gegenzug mehr für die Eltern machen (z. B. im Haushalt der Eltern helfen). Wenden sie das Anspruchsprinzip an, schenken sie den Kindern mehr, die bestimmte angeborene Statuscharakteristiken haben (z. B. Erstgeborene). Wir wollen untersuchen, inwiefern diese Prinzipien im Kontext von elterlichen Schenkungen von den Befragten befürwortet werden. Unterstützen die Befragten diese Prinzipien im selben Maße für Töchter und Söhne?\n\n## Daten einlesen\n\n\n\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the data file\ndf <- read.csv(\"../daten/just_transfers.csv\")\n```\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n## Variablenlabels einlesen\n\n\n\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the variable labels\nvariable_labels <- read.csv(\"../daten/just_transfers_variable_labels.csv\", row.names = 1, stringsAsFactors = FALSE)\n\n# View variable labels\n#print(variable_labels)\n\n\n# Loop through the labels and assign them to variables in the dataset\nfor (var in names(variable_labels)) {\n  if (var %in% names(df)) {\n    var_label(df[[var]]) <- variable_labels[[var]]\n  }\n}\n```\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n## Value labels einlesen\n\n\n\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the value labels\nvalue_labels <- read.csv(\"../daten/value_labels.csv\", stringsAsFactors = FALSE)\n\n# View value labels\nhead(value_labels)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   variable               label value\n1 firstborn       Son firstborn     1\n2 firstborn               Twins     2\n3 firstborn  Daughter firstborn     3\n4      need      Son unemployed     1\n5      need      Equal earnings     2\n6      need Daughter unemployed     3\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n## Datenstruktur betrachten\n\n\n\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlook_for(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n pos variable        label                              col_type missing values\n 1   X               —                                  int      0             \n 2   id_resp         ID of respondent                   int      0             \n 3   id_within       ID for each observation within in~ int      0             \n 4   id_vignette     ID of vignette                     int      0             \n 5   deck            Vignette deck                      int      0             \n 6   reihevig        Order of vignette                  int      0             \n 7   firstborn       Vignette: firstborn child          int      0             \n 8   need            Vignette: income                   int      0             \n 9   help            Vignette: help                     int      0             \n 10  daughter        Focal vignette person daughter     int      0             \n 11  g_need          Child's relative income            int      0             \n 12  g_help          Child's relative help              int      0             \n 13  g_firstborn     Child's relative age               int      0             \n 14  dau_vig         Vignette evaluation for daughter   int      2142          \n 15  son_vig         Vignette evaluation for son        int      2142          \n 16  child_vig       Child's amount of inter vivos      int      0             \n 17  iv_received     inter vivos received               int      18            \n 18  iv_parents      Inter vivos from parent            int      576           \n 19  iv_grandparents Inter vivos from granparent        int      576           \n 20  iv_siblings     Inter vivos from sibling           int      576           \n 21  lastiv          Amount last inter vivos            int      672           \n 22  siblings        Having siblings                    int      36            \n 23  brothers        Number of brothers                 int      726           \n 24  sisters         Number of sisters                  int      726           \n 25  r_firstborn     Respond. firstborn                 int      726           \n 26  child           Having children                    int      42            \n 27  n_sons          Number of sons                     int      2166          \n 28  n_daughters     Number of daughters                int      2166          \n 29  gifted          Ever given an inter vivos transfer int      2166          \n 30  principles      According to which principle gift~ int      3390          \n 31  rel_mo          Relationship to mother             int      708           \n 32  rel_fa          Relationship to father             int      1128          \n 33  rel_ch          Relationship to children           int      2208          \n 34  hhparent        Lives with parent                  int      540           \n 35  hhhelp          Helps parent                       int      864           \n 36  relstatus       Relationship status                int      54            \n 37  partner         Having a partner                   int      54            \n 38  partnerhh       Having a partner in household      int      1116          \n 39  age             Age                                int      54            \n 40  deutsch         Born in Germany                    int      54            \n 41  mig             Migration background               int      60            \n 42  female          Female                             int      72            \n 43  bundl           Federal state                      int      60            \n 44  abi             Abitur                             int      144           \n 45  employ          Employed                           int      54            \n 46  student         Student                            int      54            \n 47  unemp           Unemployed, active search          int      54            \n 48  unemp_nosearch  Unemployed, no active search       int      54            \n 49  disabled        Disabled                           int      54            \n 50  retired         Retired                            int      54            \n 51  house           Housework, care                    int      54            \n 52  r_income        Income categories                  int      324           \n 53  gideo1          House and children                 int      84            \n 54  gideo2          Being housewife                    int      90            \n 55  gideo3          Men: work, women: house and family int      84            \n 56  gideo4          Not good if men stay home          int      90            \n 57  abi2            Abitur and Fachabitur              int      54            \n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n\n# Fallzahlen\n\n## Wie viele Beobachtungen enthält der Datensatz?\n\n\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnrow(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 4284\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n## Wie viele befragte Personen sind im Datensatz enthalten?\n\n\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlength(unique(df$id_resp))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 714\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n## Wie viele Vignetten hat jede befragte Person bewertet?\n\n\n\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlength(unique(df$id_within))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3\n```\n\n\n:::\n\n```{.r .cell-code}\ntable(df$id_within)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n   1    2    3 \n1428 1428 1428 \n```\n\n\n:::\n\n```{.r .cell-code}\n1428/2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 714\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n\n## Wie viele Vignetten gibt es?\n\n\n\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(df$id_vignette)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n  1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20 \n134 134 134 162 162 162 180 180 180 168 168 168 146 146 146 174 174 174 154 154 \n 21  22  23  24  25  26  27 \n154 152 152 152 158 158 158 \n```\n\n\n:::\n\n```{.r .cell-code}\nlength(unique(df$id_vignette))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 27\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n\n## Wie viele Decks gibt es?\n\n\n\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(df$deck)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n  1   2   3   4   5   6   7   8   9 \n402 486 540 504 438 522 462 456 474 \n```\n\n\n:::\n\n```{.r .cell-code}\nlength(unique(df$deck))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 9\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n# Deskriptive Statistik\n\n## Replikation Tabelle 2\n\nNun wollen wir Tabelle 2 aus dem Artikel replizieren.\n\n\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filter für die Daten anwenden\nfiltered_data <- df %>%\n  filter(id_within == 1, daughter == 1)\n\n# Deskriptive Statistiken berechnen\ndescriptive_stats <- filtered_data %>%\n  summarise(\n    Female_Mean = mean(female, na.rm = TRUE),\n    Female_SD = sd(female, na.rm = TRUE),\n    Female_Min = min(female, na.rm = TRUE),\n    Female_Max = max(female, na.rm = TRUE),\n    Female_N = sum(!is.na(female)),\n    \n    Age_Mean = mean(age, na.rm = TRUE),\n    Age_SD = sd(age, na.rm = TRUE),\n    Age_Min = min(age, na.rm = TRUE),\n    Age_Max = max(age, na.rm = TRUE),\n    Age_N = sum(!is.na(age)),\n    \n    Child_Mean = mean(child, na.rm = TRUE),\n    Child_SD = sd(child, na.rm = TRUE),\n    Child_Min = min(child, na.rm = TRUE),\n    Child_Max = max(child, na.rm = TRUE),\n    Child_N = sum(!is.na(child)),\n    \n    Mig_Mean = mean(mig, na.rm = TRUE),\n    Mig_SD = sd(mig, na.rm = TRUE),\n    Mig_Min = min(mig, na.rm = TRUE),\n    Mig_Max = max(mig, na.rm = TRUE),\n    Mig_N = sum(!is.na(mig)),\n    \n    Gifted_Mean = mean(gifted, na.rm = TRUE),\n    Gifted_SD = sd(gifted, na.rm = TRUE),\n    Gifted_Min = min(gifted, na.rm = TRUE),\n    Gifted_Max = max(gifted, na.rm = TRUE),\n    Gifted_N = sum(!is.na(gifted)),\n    \n    IV_Received_Mean = mean(iv_received, na.rm = TRUE),\n    IV_Received_SD = sd(iv_received, na.rm = TRUE),\n    IV_Received_Min = min(iv_received, na.rm = TRUE),\n    IV_Received_Max = max(iv_received, na.rm = TRUE),\n    IV_Received_N = sum(!is.na(iv_received)),\n    \n    ABI_Mean = mean(abi, na.rm = TRUE),\n    ABI_SD = sd(abi, na.rm = TRUE),\n    ABI_Min = min(abi, na.rm = TRUE),\n    ABI_Max = max(abi, na.rm = TRUE),\n    ABI_N = sum(!is.na(abi))\n  )\n\n# Umstrukturierung der Tabelle\ndescriptive_stats_long <- descriptive_stats %>%\n  pivot_longer(\n    cols = everything(),\n    names_to = c(\"Variable\", \".value\"),\n    names_pattern = \"(.*)_(.*)\"\n  )\n\n# Tabelle mit sjPlot anzeigen und exportieren\ntab_df(\n  descriptive_stats_long,\n  title = \"Descriptive Statistics of Respondent Characteristics\",\n  col.header = c(\"Variable\", \"Mean\", \"SD\", \"Min\", \"Max\", \"N\")\n)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table style=\"border-collapse:collapse; border:none;\">\n<caption style=\"font-weight: bold; text-align:left;\">Descriptive Statistics of Respondent Characteristics</caption>\n<tr>\n<th style=\"border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align:left; \">Variable</th>\n<th style=\"border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; \">Mean</th>\n<th style=\"border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; \">SD</th>\n<th style=\"border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; \">Min</th>\n<th style=\"border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; \">Max</th>\n<th style=\"border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; \">N</th>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">Female</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">0.62</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">0.49</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">0</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">1</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">702</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">Age</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">44.83</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">15.08</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">21</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">73</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">705</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">Child</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">0.50</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">0.50</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">0</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">1</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">707</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">Mig</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">0.12</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">0.33</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">0</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">1</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">704</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">Gifted</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">0.66</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">0.47</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">0</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">1</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">353</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">IV_Received</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">0.87</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">0.34</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">0</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">1</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; \">711</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; border-bottom: double; \">ABI</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; \">0.86</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; \">0.35</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; \">0</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; \">1</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; \">690</td>\n</tr>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# Render\n\nWandle dieses Dokument in ein PDF und ein HTML Dokument um.\n\n# Weiterführende Literatur\n\n-   [R for Data Science](https://r4ds.had.co.nz/)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}