<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>

<meta charset="utf-8" />
<meta name="generator" content="quarto-1.6.39" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

<meta name="author" content="Daria Tisch" />

<title>2. Übungsblatt (Paneldaten) – Fortgeschrittene quantitative Methoden</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<!-- htmldependencies:E3FAD763 -->
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="../site_libs/pagedtable-1.1/js/pagedtable.js"></script>


</head>

<body>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn"
      data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" 
      aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation"
      onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <h1 class="quarto-secondary-nav-title no-breadcrumbs"></h1>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" role="link"
        aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation"
        onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="/">
      Fortgeschrittene quantitative Methoden
      </a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/dariatisch/wup2024"  title="GitHub" class="quarto-navigation-tool px-1" aria-label="GitHub"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Kursinformationen</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1"  role="navigation" aria-expanded="true">
 <span class="menu-text">Zeitplan und Dateien</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Übersicht</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/slides/1_seminar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1 - Seminar</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/slides/1_uebung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1 - Übung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/uebungen/1_uebungsblatt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1 - Übungsblatt</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/slides/2_seminar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2 - Seminar  (Paneldaten)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/uebungen/2_uebungsblatt.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">2 - Übungsblatt (Paneldaten)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/slides/3_seminar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3 - Seminar  (Ereignisdaten)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/uebungen/3_uebungsblatt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3 - Übungsblatt (Ereignisdaten)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/slides/4_seminar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4 - Seminar  (Faktorielle Umfrageexperimente)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/uebungen/4_uebungsblatt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4 - Übungsblatt (Faktorielle Umfrageexperimente)</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" ></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <div id="quarto-toc-target"></div>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">2. Übungsblatt (Paneldaten)</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Daria Tisch </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#organisation" id="toc-organisation"><span class="header-section-number">1</span> Organisation</a>
  <ul>
  <li><a href="#arbeitsverzeichnis-festsetzen" id="toc-arbeitsverzeichnis-festsetzen"><span class="header-section-number">1.1</span> Arbeitsverzeichnis festsetzen</a></li>
  <li><a href="#packages-installieren-und-laden" id="toc-packages-installieren-und-laden"><span class="header-section-number">1.2</span> Packages installieren und laden</a></li>
  <li><a href="#daten-einlesen" id="toc-daten-einlesen"><span class="header-section-number">1.3</span> Daten einlesen</a></li>
  </ul></li>
  <li><a href="#datenaufbereitung" id="toc-datenaufbereitung"><span class="header-section-number">2</span> Datenaufbereitung</a>
  <ul>
  <li><a href="#lebenszufriedenheit" id="toc-lebenszufriedenheit"><span class="header-section-number">2.1</span> Lebenszufriedenheit</a></li>
  <li><a href="#geschlecht" id="toc-geschlecht"><span class="header-section-number">2.2</span> Geschlecht</a></li>
  <li><a href="#alter" id="toc-alter"><span class="header-section-number">2.3</span> Alter</a></li>
  <li><a href="#anzahl-an-kindern-im-haushalt" id="toc-anzahl-an-kindern-im-haushalt"><span class="header-section-number">2.4</span> Anzahl an Kindern im Haushalt</a></li>
  <li><a href="#bildung" id="toc-bildung"><span class="header-section-number">2.5</span> Bildung</a></li>
  <li><a href="#einkommen" id="toc-einkommen"><span class="header-section-number">2.6</span> Einkommen</a></li>
  <li><a href="#analysesample-bilden" id="toc-analysesample-bilden"><span class="header-section-number">2.7</span> Analysesample bilden</a></li>
  </ul></li>
  <li><a href="#datenexploration" id="toc-datenexploration"><span class="header-section-number">3</span> Datenexploration</a>
  <ul>
  <li><a href="#wieviele-personenjahre-sind-im-datensatz" id="toc-wieviele-personenjahre-sind-im-datensatz"><span class="header-section-number">3.1</span> Wieviele Personenjahre sind im Datensatz?</a></li>
  <li><a href="#wie-viele-personen-sind-im-datensatz" id="toc-wie-viele-personen-sind-im-datensatz"><span class="header-section-number">3.2</span> Wie viele Personen sind im Datensatz?</a></li>
  <li><a href="#wieviele-personen-nehmen-pro-jahr-teil" id="toc-wieviele-personen-nehmen-pro-jahr-teil"><span class="header-section-number">3.3</span> Wieviele Personen nehmen pro Jahr teil?</a></li>
  <li><a href="#was-ist-das-durchschnittsalter-im-jahr-2015" id="toc-was-ist-das-durchschnittsalter-im-jahr-2015"><span class="header-section-number">3.4</span> Was ist das Durchschnittsalter im Jahr 2015</a></li>
  <li><a href="#welche-variablen-sind-zeitkonstant-und-welche-zeitveränderlich" id="toc-welche-variablen-sind-zeitkonstant-und-welche-zeitveränderlich"><span class="header-section-number">3.5</span> Welche Variablen sind zeitkonstant und welche zeitveränderlich?</a></li>
  <li><a href="#wie-viele-personen-nahmen-an-allen-fünf-wellen-teil-und-wie-viele-jahre-nahmen-personen-durchschnittlich-teil" id="toc-wie-viele-personen-nahmen-an-allen-fünf-wellen-teil-und-wie-viele-jahre-nahmen-personen-durchschnittlich-teil"><span class="header-section-number">3.6</span> Wie viele Personen nahmen an allen fünf Wellen teil? Und wie viele Jahre nahmen Personen durchschnittlich teil?</a></li>
  </ul></li>
  <li><a href="#regressionen" id="toc-regressionen"><span class="header-section-number">4</span> Regressionen</a>
  <ul>
  <li><a href="#schätze-ein-pols-modell" id="toc-schätze-ein-pols-modell"><span class="header-section-number">4.1</span> Schätze ein POLS Modell</a></li>
  <li><a href="#schätze-ein-be-modell" id="toc-schätze-ein-be-modell"><span class="header-section-number">4.2</span> Schätze ein BE Modell</a></li>
  <li><a href="#schätze-ein-fe-modell" id="toc-schätze-ein-fe-modell"><span class="header-section-number">4.3</span> Schätze ein FE Modell</a></li>
  <li><a href="#schätze-ein-re-modell" id="toc-schätze-ein-re-modell"><span class="header-section-number">4.4</span> Schätze ein RE Modell</a></li>
  <li><a href="#vergleich" id="toc-vergleich"><span class="header-section-number">4.5</span> Vergleich</a></li>
  <li><a href="#hausman-test" id="toc-hausman-test"><span class="header-section-number">4.6</span> Hausman Test</a></li>
  <li><a href="#kausalanalyse" id="toc-kausalanalyse"><span class="header-section-number">4.7</span> Kausalanalyse</a></li>
  </ul></li>
  <li><a href="#render" id="toc-render"><span class="header-section-number">5</span> Render</a></li>
  <li><a href="#weiterführende-literatur" id="toc-weiterführende-literatur"><span class="header-section-number">6</span> Weiterführende Literatur</a></li>
  </ul>
</nav>
<section id="organisation" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Organisation</h1>
<section id="arbeitsverzeichnis-festsetzen" class="level2" data-number="1.1">
<h2 data-number="1.1"><span class="header-section-number">1.1</span> Arbeitsverzeichnis festsetzen</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># set working directory</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">setwd</span>(<span class="st">&quot;D:/Seafile/main/teaching/2024_wuppertal/studis/uebungen&quot;</span>)</span></code></pre></div>
</details>
</div>
</section>
<section id="packages-installieren-und-laden" class="level2" data-number="1.2">
<h2 data-number="1.2"><span class="header-section-number">1.2</span> Packages installieren und laden</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># Packages</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>pkgs <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="st">&quot;tidyverse&quot;</span>,</span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="st">&quot;sjlabelled&quot;</span>, <span class="co"># for variable labels</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="st">&quot;plm&quot;</span>, <span class="co"># Panelregressionen</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="st">&quot;sjPlot&quot;</span> <span class="co"># um Regressionstabellen schön darzustellen</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>) </span>
<span id="cb2-8"><a href="#cb2-8"></a></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="do">## Install uninstalled packages</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="fu">lapply</span>(pkgs[<span class="sc">!</span>(pkgs <span class="sc">%in%</span> <span class="fu">installed.packages</span>())], install.packages)</span>
<span id="cb2-11"><a href="#cb2-11"></a></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="do">## Load all packages to library</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="fu">lapply</span>(pkgs, library, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</details>
</div>
</section>
<section id="daten-einlesen" class="level2" data-number="1.3">
<h2 data-number="1.3"><span class="header-section-number">1.3</span> Daten einlesen</h2>
<p>Wir arbeiten wieder mit dem Übungsdatensatz des SOEP (DOI:10.5684/soep.practice.v36). Es werden zwei Datensätze eingelesen. Der erste Datensatz enthalt die tatsächlichen Umfragedaten, der zweite Datensatz enthält die Variablenlabels.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># read data</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>df <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;../daten/soep_uebung.csv&quot;</span>)</span>
<span id="cb3-3"><a href="#cb3-3"></a>df_labels <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;../daten/soep_labels.csv&quot;</span>)</span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co"># Add variable labels</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(df_labels)) {</span>
<span id="cb3-7"><a href="#cb3-7"></a>  variable_name <span class="ot">&lt;-</span> df_labels<span class="sc">$</span>variable[i]</span>
<span id="cb3-8"><a href="#cb3-8"></a>  variable_label <span class="ot">&lt;-</span> df_labels<span class="sc">$</span>variable_label[i]</span>
<span id="cb3-9"><a href="#cb3-9"></a>  </span>
<span id="cb3-10"><a href="#cb3-10"></a>  <span class="co"># Apply the label to the corresponding column in df</span></span>
<span id="cb3-11"><a href="#cb3-11"></a>  df[[variable_name]] <span class="ot">&lt;-</span> <span class="fu">set_label</span>(df[[variable_name]], variable_label)</span>
<span id="cb3-12"><a href="#cb3-12"></a>}</span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co"># show variable labels</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="fu">get_label</span>(df)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                   id                                 syear 
&quot;Personennummer (zufällig generiert)&quot;                       &quot;Erhebungsjahr&quot; 
                                  sex                                 alter 
                         &quot;Geschlecht&quot;          &quot;Alter der Befragungsperson&quot; 
                             anz_pers                              anz_kind 
        &quot;Anzahl Personen im Haushalt&quot;           &quot;Anzahl Kinder im Haushalt&quot; 
                              bildung                                erwerb 
           &quot;Anzahl an Bildungsjahren&quot;                       &quot;Erwerbsstatus&quot; 
                              branche                            gesund_org 
            &quot;Branche aktueller Beruf&quot;                    &quot;subj. Gesundheit&quot; 
                          lebensz_org                           einkommenj1 
           &quot;Ggw. Lebenszufriedenheit&quot;     &quot;Bruttoeinkommen/Jahr Hauptberuf&quot; 
                          einkommenj2                           einkommenm1 
    &quot;Bruttoeinkommen/Jahr Nebenberuf&quot;    &quot;Bruttoeinkommen/Monat Hauptberuf&quot; 
                          einkommenm2 
   &quot;Bruttoeinkommen/Monat Nebenberuf&quot; </code></pre>
</div>
</div>
</section>
</section>
<section id="datenaufbereitung" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Datenaufbereitung</h1>
<p>In dieser Übung möchten wir herausfinden, welche Faktoren mit Lebenszufriedenheit (lebensz_org) zusammenhängen. Denkbar wären zum Beispiel: Geschlecht (sex), Alter(alter), Anzahl an Kindern im Haushalt (anz_kind), Bildung (bildung) und Einkommen (einkommenj1).</p>
<p>Um die Analysen durchzuführen, müssen wir die Variablen erst einmal aufbereiten. Überprüfe bei jeder Variable,</p>
<ul>
<li>ob fehlende Werte als solche markiert sind</li>
<li>um welchen Typ es sich bei den Variablen hanelt und ob etwa eine Umwandlung erforderlich ist.</li>
</ul>
<section id="lebenszufriedenheit" class="level2" data-number="2.1">
<h2 data-number="2.1"><span class="header-section-number">2.1</span> Lebenszufriedenheit</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">table</span>(df<span class="sc">$</span>lebensz_org, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
                             [0] ganz und gar unzufrieden 
                         611                           62 
 [10] ganz und gar zufrieden                            1 
                        1350                           83 
                           2                            3 
                         202                          418 
                           4                            5 
                         574                         1837 
                           6                            7 
                        1868                         4645 
                           8                            9 
                        7963                         3909 
                        &lt;NA&gt; 
                           0 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>df <span class="ot">=</span> df <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="fu">mutate</span>(<span class="at">lz =</span> <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">[([0-9]+)</span><span class="sc">\\</span><span class="st">].*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, df<span class="sc">$</span>lebensz_org)))</span>
<span id="cb7-3"><a href="#cb7-3"></a></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="fu">table</span>(df<span class="sc">$</span>lz, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
   0    1    2    3    4    5    6    7    8    9   10 &lt;NA&gt; 
  62   83  202  418  574 1837 1868 4645 7963 3909 1350  611 </code></pre>
</div>
</div>
</section>
<section id="geschlecht" class="level2" data-number="2.2">
<h2 data-number="2.2"><span class="header-section-number">2.2</span> Geschlecht</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">table</span>(df<span class="sc">$</span>sex, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
[0] männlich [1] weiblich         &lt;NA&gt; 
       10762        12760            0 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>df <span class="ot">=</span> df <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">mutate</span>(<span class="at">female =</span> <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">[([0-9]+)</span><span class="sc">\\</span><span class="st">].*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, df<span class="sc">$</span>sex)))</span>
<span id="cb11-3"><a href="#cb11-3"></a></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="fu">table</span>(df<span class="sc">$</span>female, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    0     1  &lt;NA&gt; 
10762 12760     0 </code></pre>
</div>
</div>
</section>
<section id="alter" class="level2" data-number="2.3">
<h2 data-number="2.3"><span class="header-section-number">2.3</span> Alter</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">table</span>(df<span class="sc">$</span>alter, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
  17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32 
 472  470  437  392  347  290  281  263  244  254  283  282  293  304  337  341 
  33   34   35   36   37   38   39   40   41   42   43   44   45   46   47   48 
 331  368  387  387  379  397  413  430  447  450  454  434  450  466  466  473 
  49   50   51   52   53   54   55   56   57   58   59   60   61   62   63   64 
 500  517  526  518  479  447  412  381  381  359  339  336  326  296  298  312 
  65   66   67   68   69   70   71   72   73   74   75   76   77   78   79   80 
 325  314  309  294  272  239  242  244  246  256  276  271  270  247  223  192 
  81   82   83   84   85   86   87   88   89   90   91   92   93   94   95   96 
 156  124  105   82   74   64   47   46   36   28   19   18   13   11    8    5 
  97   98   99  100  101  102 &lt;NA&gt; 
   5    4    3    3    1    1    0 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">class</span>(df<span class="sc">$</span>alter)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;integer&quot;</code></pre>
</div>
</div>
</section>
<section id="anzahl-an-kindern-im-haushalt" class="level2" data-number="2.4">
<h2 data-number="2.4"><span class="header-section-number">2.4</span> Anzahl an Kindern im Haushalt</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">table</span>(df<span class="sc">$</span>anz_kind, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    0     1     2     3     4     5     6     7     8     9    10  &lt;NA&gt; 
14108  3874  3557  1360   367   103    52    15     7     1     1    77 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">class</span>(df<span class="sc">$</span>anz_kind)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;integer&quot;</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(df<span class="sc">$</span>anz_kind))</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 77</code></pre>
</div>
</div>
</section>
<section id="bildung" class="level2" data-number="2.5">
<h2 data-number="2.5"><span class="header-section-number">2.5</span> Bildung</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">table</span>(df<span class="sc">$</span>bildung, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
   7  8.5    9   10 10.5   11 11.5   12   13 13.5   14 14.5   15   16   17   18 
 325   52 2296  839 4044  812 3285 2829 1331  334  556  526 1015  759  113 2795 
&lt;NA&gt; 
1611 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">class</span>(df<span class="sc">$</span>bildung)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;numeric&quot;</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(df<span class="sc">$</span>bildung))</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1611</code></pre>
</div>
</div>
</section>
<section id="einkommen" class="level2" data-number="2.6">
<h2 data-number="2.6"><span class="header-section-number">2.6</span> Einkommen</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb29"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="fu">summary</span>(df<span class="sc">$</span>einkommenj1)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      0       0    5786   16776   28525  269425 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb31"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">class</span>(df<span class="sc">$</span>einkommenj1)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;numeric&quot;</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb33"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(df<span class="sc">$</span>einkommenj1))</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
</section>
<section id="analysesample-bilden" class="level2" data-number="2.7">
<h2 data-number="2.7"><span class="header-section-number">2.7</span> Analysesample bilden</h2>
<ol type="a">
<li>Selektiere nur die Variablen, die wir brauchen</li>
</ol>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb35"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>df <span class="ot">=</span> df <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>  <span class="fu">select</span>(id,syear, lz,female, alter, anz_kind, bildung, einkommenj1)</span></code></pre></div>
</details>
</div>
<ol start="2" type="a">
<li>Nun bilden wir das Analysesample. Wir wenden “listwise deletion”.</li>
</ol>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb36"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>df_listwise <span class="ot">&lt;-</span> df[<span class="fu">complete.cases</span>(df[, <span class="fu">c</span>(<span class="st">&quot;lz&quot;</span>,<span class="st">&quot;female&quot;</span>, <span class="st">&quot;alter&quot;</span>, <span class="st">&quot;anz_kind&quot;</span>, <span class="st">&quot;bildung&quot;</span>, <span class="st">&quot;einkommenj1&quot;</span>)]), ]</span></code></pre></div>
</details>
</div>
<ol start="3" type="a">
<li>Wie viele Beobachtungen gehen uns verloren?</li>
</ol>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb37"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="co"># Initialize a data frame to store the results</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb37-3"><a href="#cb37-3"></a>  <span class="at">Variable =</span> <span class="fu">character</span>(),</span>
<span id="cb37-4"><a href="#cb37-4"></a>  <span class="at">Cases_Remaining =</span> <span class="fu">integer</span>(),</span>
<span id="cb37-5"><a href="#cb37-5"></a>  <span class="at">Cases_Lost =</span> <span class="fu">integer</span>(),</span>
<span id="cb37-6"><a href="#cb37-6"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb37-7"><a href="#cb37-7"></a>)</span>
<span id="cb37-8"><a href="#cb37-8"></a></span>
<span id="cb37-9"><a href="#cb37-9"></a><span class="co"># Total number of rows initially</span></span>
<span id="cb37-10"><a href="#cb37-10"></a>initial_rows <span class="ot">&lt;-</span> <span class="fu">nrow</span>(df)</span>
<span id="cb37-11"><a href="#cb37-11"></a></span>
<span id="cb37-12"><a href="#cb37-12"></a><span class="co"># Iterate over each variable</span></span>
<span id="cb37-13"><a href="#cb37-13"></a><span class="cf">for</span> (var <span class="cf">in</span> <span class="fu">names</span>(df)) {</span>
<span id="cb37-14"><a href="#cb37-14"></a>  <span class="co"># Perform listwise deletion based on the current variable</span></span>
<span id="cb37-15"><a href="#cb37-15"></a>  remaining_rows <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">complete.cases</span>(df[, var, <span class="at">drop =</span> <span class="cn">FALSE</span>]))</span>
<span id="cb37-16"><a href="#cb37-16"></a>  </span>
<span id="cb37-17"><a href="#cb37-17"></a>  <span class="co"># Calculate cases lost</span></span>
<span id="cb37-18"><a href="#cb37-18"></a>  cases_lost <span class="ot">&lt;-</span> initial_rows <span class="sc">-</span> remaining_rows</span>
<span id="cb37-19"><a href="#cb37-19"></a>  </span>
<span id="cb37-20"><a href="#cb37-20"></a>  <span class="co"># Append to the results data frame</span></span>
<span id="cb37-21"><a href="#cb37-21"></a>  results <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb37-22"><a href="#cb37-22"></a>    results,</span>
<span id="cb37-23"><a href="#cb37-23"></a>    <span class="fu">data.frame</span>(</span>
<span id="cb37-24"><a href="#cb37-24"></a>      <span class="at">Variable =</span> var,</span>
<span id="cb37-25"><a href="#cb37-25"></a>      <span class="at">Cases_Remaining =</span> remaining_rows,</span>
<span id="cb37-26"><a href="#cb37-26"></a>      <span class="at">Cases_Lost =</span> cases_lost</span>
<span id="cb37-27"><a href="#cb37-27"></a>    )</span>
<span id="cb37-28"><a href="#cb37-28"></a>  )</span>
<span id="cb37-29"><a href="#cb37-29"></a>}</span>
<span id="cb37-30"><a href="#cb37-30"></a></span>
<span id="cb37-31"><a href="#cb37-31"></a>results</span></code></pre></div>
</details>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source type="application/json">
{"columns":[{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Cases_Remaining"],"name":[2],"type":["int"],"align":["right"]},{"label":["Cases_Lost"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"id","2":"23522","3":"0"},{"1":"syear","2":"23522","3":"0"},{"1":"lz","2":"22911","3":"611"},{"1":"female","2":"23522","3":"0"},{"1":"alter","2":"23522","3":"0"},{"1":"anz_kind","2":"23445","3":"77"},{"1":"bildung","2":"21911","3":"1611"},{"1":"einkommenj1","2":"23522","3":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb38"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a>df <span class="ot">&lt;-</span> df[<span class="fu">complete.cases</span>(df[, <span class="fu">c</span>(<span class="st">&quot;lz&quot;</span>,<span class="st">&quot;female&quot;</span>, <span class="st">&quot;alter&quot;</span>, <span class="st">&quot;anz_kind&quot;</span>, <span class="st">&quot;bildung&quot;</span>, <span class="st">&quot;einkommenj1&quot;</span>)]), ]</span></code></pre></div>
</details>
</div>
</section>
</section>
<section id="datenexploration" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Datenexploration</h1>
<section id="wieviele-personenjahre-sind-im-datensatz" class="level2" data-number="3.1">
<h2 data-number="3.1"><span class="header-section-number">3.1</span> Wieviele Personenjahre sind im Datensatz?</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb39"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="fu">nrow</span>(df)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 21642</code></pre>
</div>
</div>
</section>
<section id="wie-viele-personen-sind-im-datensatz" class="level2" data-number="3.2">
<h2 data-number="3.2"><span class="header-section-number">3.2</span> Wie viele Personen sind im Datensatz?</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb41"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>id))</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5788</code></pre>
</div>
</div>
</section>
<section id="wieviele-personen-nehmen-pro-jahr-teil" class="level2" data-number="3.3">
<h2 data-number="3.3"><span class="header-section-number">3.3</span> Wieviele Personen nehmen pro Jahr teil?</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb43"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="fu">table</span>(df<span class="sc">$</span>syear) </span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
2015 2016 2017 2018 2019 
5122 4572 4341 3992 3615 </code></pre>
</div>
</div>
<p>Wir haben also ein sogenanntes “unbalanced panel”.</p>
</section>
<section id="was-ist-das-durchschnittsalter-im-jahr-2015" class="level2" data-number="3.4">
<h2 data-number="3.4"><span class="header-section-number">3.4</span> Was ist das Durchschnittsalter im Jahr 2015</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb45"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="co"># Berechnung des Durchschnittsalters für das Jahr 2015</span></span>
<span id="cb45-2"><a href="#cb45-2"></a><span class="fu">mean</span>(df<span class="sc">$</span>alter[df<span class="sc">$</span>syear <span class="sc">==</span> <span class="dv">2015</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 48.99863</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb47"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="co"># Alternative mit dplyr</span></span>
<span id="cb47-2"><a href="#cb47-2"></a>durchschnittsalter <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="#cb47-3"></a>  <span class="fu">filter</span>(syear <span class="sc">==</span> <span class="dv">2015</span>) <span class="sc">%&gt;%</span>       <span class="co"># Filtert die Daten für das Jahr 2015</span></span>
<span id="cb47-4"><a href="#cb47-4"></a>  <span class="fu">summarise</span>(<span class="at">mean_alter =</span> <span class="fu">mean</span>(alter, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span>  <span class="co"># Berechnet den Durchschnitt</span></span>
<span id="cb47-5"><a href="#cb47-5"></a>  <span class="fu">pull</span>(mean_alter)               <span class="co"># Extrahiert den berechneten Wert</span></span>
<span id="cb47-6"><a href="#cb47-6"></a></span>
<span id="cb47-7"><a href="#cb47-7"></a><span class="fu">cat</span>(<span class="st">&quot;Das Durchschnittsalter im Jahr 2015 beträgt:&quot;</span>, <span class="fu">round</span>(durchschnittsalter,<span class="dv">2</span>), <span class="st">&quot;Jahre.&quot;</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Das Durchschnittsalter im Jahr 2015 beträgt: 49 Jahre.</code></pre>
</div>
</div>
</section>
<section id="welche-variablen-sind-zeitkonstant-und-welche-zeitveränderlich" class="level2" data-number="3.5">
<h2 data-number="3.5"><span class="header-section-number">3.5</span> Welche Variablen sind zeitkonstant und welche zeitveränderlich?</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb49"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="co"># Analyse: Zeitkonstante und zeitveränderliche Variablen</span></span>
<span id="cb49-2"><a href="#cb49-2"></a></span>
<span id="cb49-3"><a href="#cb49-3"></a>variablen_analyse <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb49-4"><a href="#cb49-4"></a>  <span class="fu">mutate</span>(<span class="at">id2 =</span> id) <span class="sc">%&gt;%</span></span>
<span id="cb49-5"><a href="#cb49-5"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span>                        <span class="co"># Gruppiert die Daten nach ID</span></span>
<span id="cb49-6"><a href="#cb49-6"></a>  <span class="fu">summarise_all</span>(<span class="sc">~</span> <span class="fu">n_distinct</span>(.)) <span class="sc">%&gt;%</span>      <span class="co"># Zählt die Anzahl der einzigartigen Werte je ID</span></span>
<span id="cb49-7"><a href="#cb49-7"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), max))    <span class="co"># Nimmt das Maximum der einzigartigen Werte je Variable</span></span>
<span id="cb49-8"><a href="#cb49-8"></a></span>
<span id="cb49-9"><a href="#cb49-9"></a></span>
<span id="cb49-10"><a href="#cb49-10"></a><span class="co"># Ergebnis interpretieren</span></span>
<span id="cb49-11"><a href="#cb49-11"></a>zeitkonstant <span class="ot">&lt;-</span> <span class="fu">names</span>(variablen_analyse)[variablen_analyse <span class="sc">==</span> <span class="dv">1</span>]  <span class="co"># Variablen mit nur einem Wert je ID</span></span>
<span id="cb49-12"><a href="#cb49-12"></a>zeitveraenderlich <span class="ot">&lt;-</span> <span class="fu">names</span>(variablen_analyse)[variablen_analyse <span class="sc">&gt;</span> <span class="dv">1</span>]  <span class="co"># Variablen mit mehreren Werten je ID</span></span>
<span id="cb49-13"><a href="#cb49-13"></a></span>
<span id="cb49-14"><a href="#cb49-14"></a><span class="co"># Ausgabe</span></span>
<span id="cb49-15"><a href="#cb49-15"></a><span class="fu">cat</span>(<span class="st">&quot;Zeitkonstante Variablen:</span><span class="sc">\n</span><span class="st">&quot;</span>,zeitkonstant )</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Zeitkonstante Variablen:
 female id2</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb51"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">Zeitveränderliche Variablen:</span><span class="sc">\n</span><span class="st">&quot;</span>, zeitveraenderlich)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Zeitveränderliche Variablen:
 id syear lz alter anz_kind bildung einkommenj1</code></pre>
</div>
</div>
</section>
<section id="wie-viele-personen-nahmen-an-allen-fünf-wellen-teil-und-wie-viele-jahre-nahmen-personen-durchschnittlich-teil" class="level2" data-number="3.6">
<h2 data-number="3.6"><span class="header-section-number">3.6</span> Wie viele Personen nahmen an allen fünf Wellen teil? Und wie viele Jahre nahmen Personen durchschnittlich teil?</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb53"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="co"># Anteil der Personen, die an allen fünf Wellen teilgenommen haben</span></span>
<span id="cb53-2"><a href="#cb53-2"></a>data_summary <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb53-3"><a href="#cb53-3"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span></span>
<span id="cb53-4"><a href="#cb53-4"></a>  <span class="fu">summarize</span>(<span class="at">years_observed =</span> <span class="fu">n_distinct</span>(syear))</span>
<span id="cb53-5"><a href="#cb53-5"></a><span class="fu">table</span>(data_summary<span class="sc">$</span>years_observed)  <span class="co"># Verteilung der Beobachtungsjahre</span></span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
   1    2    3    4    5 
 840  649  593  805 2901 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb55"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a><span class="co"># Durchschnittliche Beobachtungsjahre pro Person</span></span>
<span id="cb55-2"><a href="#cb55-2"></a><span class="fu">mean</span>(data_summary<span class="sc">$</span>years_observed)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.739115</code></pre>
</div>
</div>
</section>
</section>
<section id="regressionen" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Regressionen</h1>
<section id="schätze-ein-pols-modell" class="level2" data-number="4.1">
<h2 data-number="4.1"><span class="header-section-number">4.1</span> Schätze ein POLS Modell</h2>
<p>… und interepretiere die Koeffizienten.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb57"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a>m_pol <span class="ot">&lt;-</span> <span class="fu">plm</span>(lz <span class="sc">~</span> female <span class="sc">+</span> alter <span class="sc">+</span> anz_kind <span class="sc">+</span> bildung <span class="sc">+</span> einkommenj1, <span class="at">data =</span> df,</span>
<span id="cb57-2"><a href="#cb57-2"></a>           <span class="at">index =</span> <span class="fu">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;syear&quot;</span>),</span>
<span id="cb57-3"><a href="#cb57-3"></a>           <span class="at">effect =</span> <span class="st">&quot;individual&quot;</span>, <span class="at">model =</span> <span class="st">&quot;pooling&quot;</span>)</span>
<span id="cb57-4"><a href="#cb57-4"></a><span class="fu">tab_model</span>(m_pol,</span>
<span id="cb57-5"><a href="#cb57-5"></a>          <span class="at">dv.labels =</span> <span class="fu">paste</span>(<span class="st">&quot;POLS Model&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top" data-quarto-postprocess="true" style="border-collapse:collapse; border:none;">
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: normal; font-weight: bold; padding: 0.2cm;"> </td>
<td colspan="3" data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: normal; font-weight: bold; padding: 0.2cm;">POLS Model</td>
</tr>
<tr class="even">
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">Predictors</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">Estimates</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">CI</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">p</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">(Intercept)</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">6.71</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">6.58 – 6.84</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">female</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.04 – 0.05</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.871</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">alter</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.00 – -0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">anz kind</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.05</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.03 – 0.07</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">bildung</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.06</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.05 – 0.06</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">einkommenj1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.00 – 0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm; border-top: 1px solid;">Observations</td>
<td colspan="3" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm; border-top: 1px solid;">21642</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm;">R<sup>2</sup> / R<sup>2</sup> adjusted</td>
<td colspan="3" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm;">0.022 / 0.022</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="schätze-ein-be-modell" class="level2" data-number="4.2">
<h2 data-number="4.2"><span class="header-section-number">4.2</span> Schätze ein BE Modell</h2>
<p>… und interepretiere die Koeffizienten.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb58"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a>m_be <span class="ot">&lt;-</span> <span class="fu">plm</span>(lz <span class="sc">~</span> female <span class="sc">+</span> alter <span class="sc">+</span> anz_kind <span class="sc">+</span> bildung <span class="sc">+</span> einkommenj1, <span class="at">data =</span> df,</span>
<span id="cb58-2"><a href="#cb58-2"></a>           <span class="at">index =</span> <span class="fu">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;syear&quot;</span>),</span>
<span id="cb58-3"><a href="#cb58-3"></a>           <span class="at">effect =</span> <span class="st">&quot;individual&quot;</span>, <span class="at">model =</span> <span class="st">&quot;between&quot;</span>)</span>
<span id="cb58-4"><a href="#cb58-4"></a><span class="fu">tab_model</span>(m_be,</span>
<span id="cb58-5"><a href="#cb58-5"></a>          <span class="at">dv.labels =</span> <span class="fu">paste</span>(<span class="st">&quot;BE Model&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top" data-quarto-postprocess="true" style="border-collapse:collapse; border:none;">
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: normal; font-weight: bold; padding: 0.2cm;"> </td>
<td colspan="3" data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: normal; font-weight: bold; padding: 0.2cm;">BE Model</td>
</tr>
<tr class="even">
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">Predictors</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">Estimates</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">CI</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">p</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">(Intercept)</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">6.72</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">6.51 – 6.93</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">female</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.06</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.01 – 0.14</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.114</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">alter</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.01 – -0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">anz kind</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.05</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.02 – 0.09</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.005</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">bildung</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.06</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.04 – 0.07</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">einkommenj1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.00 – 0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm; border-top: 1px solid;">Observations</td>
<td colspan="3" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm; border-top: 1px solid;">5788</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm;">R<sup>2</sup> / R<sup>2</sup> adjusted</td>
<td colspan="3" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm;">0.035 / 0.034</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="schätze-ein-fe-modell" class="level2" data-number="4.3">
<h2 data-number="4.3"><span class="header-section-number">4.3</span> Schätze ein FE Modell</h2>
<p>… und interepretiere die Koeffizienten.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb59"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>m_fe <span class="ot">&lt;-</span> <span class="fu">plm</span>(lz <span class="sc">~</span> female <span class="sc">+</span> alter <span class="sc">+</span> anz_kind <span class="sc">+</span> bildung <span class="sc">+</span> einkommenj1 , <span class="at">data =</span> df,</span>
<span id="cb59-2"><a href="#cb59-2"></a>           <span class="at">index =</span> <span class="fu">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;syear&quot;</span>),</span>
<span id="cb59-3"><a href="#cb59-3"></a>           <span class="at">effect =</span> <span class="st">&quot;individual&quot;</span>, <span class="at">model =</span> <span class="st">&quot;within&quot;</span>)</span>
<span id="cb59-4"><a href="#cb59-4"></a><span class="co"># Retrieve the number of groups</span></span>
<span id="cb59-5"><a href="#cb59-5"></a>num_groups <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(<span class="fu">index</span>(m_fe)[, <span class="st">&quot;id&quot;</span>]))</span>
<span id="cb59-6"><a href="#cb59-6"></a><span class="fu">tab_model</span>(m_fe,</span>
<span id="cb59-7"><a href="#cb59-7"></a>          <span class="at">dv.labels =</span> <span class="fu">paste</span>(<span class="st">&quot;FE Model (&quot;</span>, num_groups, <span class="st">&quot; Groups)&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top" data-quarto-postprocess="true" style="border-collapse:collapse; border:none;">
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: normal; font-weight: bold; padding: 0.2cm;"> </td>
<td colspan="3" data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: normal; font-weight: bold; padding: 0.2cm;">FE Model (5788 Groups)</td>
</tr>
<tr class="even">
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">Predictors</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">Estimates</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">CI</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">p</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">alter</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.01</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.01 – 0.02</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.273</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">anz kind</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.02</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.04 – 0.07</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.560</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">bildung</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.03</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.03 – 0.09</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.312</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">einkommenj1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.00 – 0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.574</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm; border-top: 1px solid;">Observations</td>
<td colspan="3" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm; border-top: 1px solid;">21642</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm;">R<sup>2</sup> / R<sup>2</sup> adjusted</td>
<td colspan="3" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm;">0.000 / -0.365</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="schätze-ein-re-modell" class="level2" data-number="4.4">
<h2 data-number="4.4"><span class="header-section-number">4.4</span> Schätze ein RE Modell</h2>
<p>… und interepretiere die Koeffizienten.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb60"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a>m_re <span class="ot">&lt;-</span> <span class="fu">plm</span>(lz <span class="sc">~</span> female <span class="sc">+</span> alter <span class="sc">+</span> anz_kind <span class="sc">+</span> bildung <span class="sc">+</span> einkommenj1, <span class="at">data =</span> df,</span>
<span id="cb60-2"><a href="#cb60-2"></a>           <span class="at">index =</span> <span class="fu">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;syear&quot;</span>),</span>
<span id="cb60-3"><a href="#cb60-3"></a>           <span class="at">effect =</span> <span class="st">&quot;individual&quot;</span>, <span class="at">model =</span> <span class="st">&quot;random&quot;</span>)</span>
<span id="cb60-4"><a href="#cb60-4"></a><span class="co"># Retrieve the number of groups</span></span>
<span id="cb60-5"><a href="#cb60-5"></a>num_groups <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(<span class="fu">index</span>(m_re)[, <span class="st">&quot;id&quot;</span>]))</span>
<span id="cb60-6"><a href="#cb60-6"></a><span class="fu">tab_model</span>(m_re,</span>
<span id="cb60-7"><a href="#cb60-7"></a>          <span class="at">dv.labels =</span> <span class="fu">paste</span>(<span class="st">&quot;RE Model (&quot;</span>, num_groups, <span class="st">&quot; Groups)&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top" data-quarto-postprocess="true" style="border-collapse:collapse; border:none;">
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: normal; font-weight: bold; padding: 0.2cm;"> </td>
<td colspan="3" data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: normal; font-weight: bold; padding: 0.2cm;">RE Model (5788 Groups)</td>
</tr>
<tr class="even">
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">Predictors</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">Estimates</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">CI</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">p</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">(Intercept)</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">6.74</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">6.54 – 6.94</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">female</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.02</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.05 – 0.10</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.540</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">alter</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.01 – -0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">anz kind</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.04</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.01 – 0.08</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.004</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">bildung</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.06</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.05 – 0.07</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">einkommenj1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.00 – 0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm; border-top: 1px solid;">Observations</td>
<td colspan="3" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm; border-top: 1px solid;">21642</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm;">R<sup>2</sup> / R<sup>2</sup> adjusted</td>
<td colspan="3" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm;">0.164 / 0.164</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="vergleich" class="level2" data-number="4.5">
<h2 data-number="4.5"><span class="header-section-number">4.5</span> Vergleich</h2>
<p>Vergleiche die vier Modelle.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb61"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a><span class="fu">tab_model</span>(m_pol, m_be, m_fe , m_re, <span class="at">show.ci =</span> <span class="cn">FALSE</span>,</span>
<span id="cb61-2"><a href="#cb61-2"></a>          <span class="at">dv.labels =</span> <span class="fu">c</span>(<span class="st">&quot;POLS&quot;</span>, <span class="st">&quot;BE&quot;</span>, <span class="st">&quot;FE&quot;</span>, <span class="st">&quot;RE&quot;</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top" data-quarto-postprocess="true" style="border-collapse:collapse; border:none;">
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: normal; font-weight: bold; padding: 0.2cm;"> </td>
<td colspan="2" data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: normal; font-weight: bold; padding: 0.2cm;">POLS</td>
<td colspan="2" data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: normal; font-weight: bold; padding: 0.2cm;">BE</td>
<td colspan="2" data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: normal; font-weight: bold; padding: 0.2cm;">FE</td>
<td colspan="2" data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: normal; font-weight: bold; padding: 0.2cm;">RE</td>
</tr>
<tr class="even">
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">Predictors</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">Estimates</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">p</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">Estimates</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">p</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">Estimates</td>
<td style="text-align: center;">p</td>
<td style="text-align: center;">Estimates</td>
<td style="text-align: center;">p</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">(Intercept)</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">6.71</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">6.72</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">6.74</td>
<td style="text-align: center;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">female</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.871</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.06</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.114</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">0.02</td>
<td style="text-align: center;">0.540</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">alter</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.01</td>
<td style="text-align: center;">0.273</td>
<td style="text-align: center;">-0.00</td>
<td style="text-align: center;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">anz kind</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.05</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.05</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>0.005</strong></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.02</td>
<td style="text-align: center;">0.560</td>
<td style="text-align: center;">0.04</td>
<td style="text-align: center;"><strong>0.004</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">bildung</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.06</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.06</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.03</td>
<td style="text-align: center;">0.312</td>
<td style="text-align: center;">0.06</td>
<td style="text-align: center;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">einkommenj1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.00</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.00</td>
<td style="text-align: center;">0.574</td>
<td style="text-align: center;">0.00</td>
<td style="text-align: center;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm; border-top: 1px solid;">Observations</td>
<td colspan="2" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm; border-top: 1px solid;">21642</td>
<td colspan="2" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm; border-top: 1px solid;">5788</td>
<td colspan="2" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm; border-top: 1px solid;">21642</td>
<td colspan="2" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm; border-top: 1px solid;">21642</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm;">R<sup>2</sup> / R<sup>2</sup> adjusted</td>
<td colspan="2" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm;">0.022 / 0.022</td>
<td colspan="2" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm;">0.035 / 0.034</td>
<td colspan="2" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm;">0.000 / -0.365</td>
<td colspan="2" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm;">0.164 / 0.164</td>
</tr>
</tbody>
</table>


</div>
</div>
<ol type="a">
<li><p>Warum wird im FE kein Koeffizient für <em>female</em> geschätzt?</p></li>
<li><p>Warum ist die Anzahl an Beobachtungen im BE Modell kleiner als die Anzahl an Beobachtungen in den anderen Modellen?</p></li>
</ol>
</section>
<section id="hausman-test" class="level2" data-number="4.6">
<h2 data-number="4.6"><span class="header-section-number">4.6</span> Hausman Test</h2>
<p>Sollen wir das RE oder das FE Modell nutzen? Führe einen Hausman Test durch. Wie entscheidest Du Dich?</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode" id="cb62"><pre class="sourceCode numberSource r cell-code number-lines"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a><span class="fu">phtest</span>(m_fe, m_re)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Hausman Test

data:  lz ~ female + alter + anz_kind + bildung + einkommenj1
chisq = 19.898, df = 4, p-value = 0.000523
alternative hypothesis: one model is inconsistent</code></pre>
</div>
</div>
</section>
<section id="kausalanalyse" class="level2" data-number="4.7">
<h2 data-number="4.7"><span class="header-section-number">4.7</span> Kausalanalyse</h2>
<p>Wir sind am kausalen Effekt von Einkommen auf Lebenszufriedenheit interessiert. Auf welche Variablen sollten wir kontrollieren und auf welche nicht? Nenne Beispiele für mögliche confounder, collider und Variablen, die zu overcontrol führen. Begründe die Auswahl der Variablen jeweils in einem Satz. Es können durchaus Variablen genannt werden, die <strong>nicht</strong> im Datensatz enthalten sind.</p>
</section>
</section>
<section id="render" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Render</h1>
<p>Wandle dieses Dokument in ein PDF und ein HTML Dokument um.</p>
</section>
<section id="weiterführende-literatur" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Weiterführende Literatur</h1>
<ul>
<li><a href="https://r4ds.had.co.nz/">R for Data Science</a></li>
<li>https://ruettenauer.github.io/Panel-Data-Analysis/</li>
</ul>
<div id="quarto-navigation-envelope" class="hidden">
<p><span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1zaWRlYmFyLXRpdGxl">Fortgeschrittene quantitative Methoden</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1uYXZiYXItdGl0bGU=">Fortgeschrittene quantitative Methoden</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1uZXh0">3 - Seminar (Ereignisdaten)</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1wcmV2">2 - Seminar (Paneldaten)</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1zaWRlYmFyOi9pbmRleC5odG1sS3Vyc2luZm9ybWF0aW9uZW4=">Kursinformationen</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1zaWRlYmFyOnF1YXJ0by1zaWRlYmFyLXNlY3Rpb24tMQ==">Zeitplan und Dateien</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1zaWRlYmFyOi9zY2hlZHVsZS5odG1sw5xiZXJzaWNodA==">Übersicht</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1zaWRlYmFyOi9zbGlkZXMvMV9zZW1pbmFyLmh0bWwxLS0tU2VtaW5hcg==">1 - Seminar</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1zaWRlYmFyOi9zbGlkZXMvMV91ZWJ1bmcuaHRtbDEtLS3DnGJ1bmc=">1 - Übung</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1zaWRlYmFyOi91ZWJ1bmdlbi8xX3VlYnVuZ3NibGF0dC5odG1sMS0tLcOcYnVuZ3NibGF0dA==">1 - Übungsblatt</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1zaWRlYmFyOi9zbGlkZXMvMl9zZW1pbmFyLmh0bWwyLS0tU2VtaW5hci0tKFBhbmVsZGF0ZW4p">2 - Seminar (Paneldaten)</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1zaWRlYmFyOi91ZWJ1bmdlbi8yX3VlYnVuZ3NibGF0dC5odG1sMi0tLcOcYnVuZ3NibGF0dC0oUGFuZWxkYXRlbik=">2 - Übungsblatt (Paneldaten)</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1zaWRlYmFyOi9zbGlkZXMvM19zZW1pbmFyLmh0bWwzLS0tU2VtaW5hci0tKEVyZWlnbmlzZGF0ZW4p">3 - Seminar (Ereignisdaten)</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1zaWRlYmFyOi91ZWJ1bmdlbi8zX3VlYnVuZ3NibGF0dC5odG1sMy0tLcOcYnVuZ3NibGF0dC0oRXJlaWduaXNkYXRlbik=">3 - Übungsblatt (Ereignisdaten)</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1zaWRlYmFyOi9zbGlkZXMvNF9zZW1pbmFyLmh0bWw0LS0tU2VtaW5hci0tKEZha3RvcmllbGxlLVVtZnJhZ2VleHBlcmltZW50ZSk=">4 - Seminar (Faktorielle Umfrageexperimente)</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWludC1zaWRlYmFyOi91ZWJ1bmdlbi80X3VlYnVuZ3NibGF0dC5odG1sNC0tLcOcYnVuZ3NibGF0dC0oRmFrdG9yaWVsbGUtVW1mcmFnZWV4cGVyaW1lbnRlKQ==">4 - Übungsblatt (Faktorielle Umfrageexperimente)</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWJyZWFkY3J1bWJzLVplaXRwbGFuLXVuZC1EYXRlaWVu">Zeitplan und Dateien</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLWJyZWFkY3J1bWJzLTItLS3DnGJ1bmdzYmxhdHQtKFBhbmVsZGF0ZW4p">2 - Übungsblatt (Paneldaten)</span></p>
<div class="hidden quarto-markdown-envelope-contents" data-render-id="Zm9vdGVyLWxlZnQ=">
<p>© Copyright 2024, Daria Tisch</p>
</div>
<div class="hidden quarto-markdown-envelope-contents" data-render-id="Zm9vdGVyLXJpZ2h0">
<p>This page is built with 💙 and <a href="https://quarto.org/">Quarto</a>.</p>
</div>
</div>
<div id="quarto-meta-markdown" class="hidden">
<p><span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLW1ldGF0aXRsZQ==">2. Übungsblatt (Paneldaten) – Fortgeschrittene quantitative Methoden</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLXR3aXR0ZXJjYXJkdGl0bGU=">2. Übungsblatt (Paneldaten) – Fortgeschrittene quantitative Methoden</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLW9nY2FyZHRpdGxl">2. Übungsblatt (Paneldaten) – Fortgeschrittene quantitative Methoden</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLW1ldGFzaXRlbmFtZQ==">Fortgeschrittene quantitative Methoden</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLXR3aXR0ZXJjYXJkZGVzYw=="></span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="cXVhcnRvLW9nY2FyZGRkZXNj"></span></p>
</div>
<!-- -->
<div class="quarto-embedded-source-code">
<div class="sourceCode" id="cb64" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines"><code class="sourceCode markdown"><span id="cb64-1"><a href="#cb64-1"></a><span class="co">---</span></span>
<span id="cb64-2"><a href="#cb64-2"></a><span class="an">title:</span><span class="co"> &quot;2. Übungsblatt (Paneldaten)&quot;</span></span>
<span id="cb64-3"><a href="#cb64-3"></a><span class="an">author:</span><span class="co"> &quot;Daria Tisch&quot;</span></span>
<span id="cb64-4"><a href="#cb64-4"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb64-5"><a href="#cb64-5"></a><span class="co">  html:</span></span>
<span id="cb64-6"><a href="#cb64-6"></a><span class="co">    code-fold: true</span></span>
<span id="cb64-7"><a href="#cb64-7"></a><span class="co">    code-tools: true</span></span>
<span id="cb64-8"><a href="#cb64-8"></a><span class="co">    code-link: true</span></span>
<span id="cb64-9"><a href="#cb64-9"></a><span class="co">    df-print: paged</span></span>
<span id="cb64-10"><a href="#cb64-10"></a><span class="co">    code-line-numbers: true</span></span>
<span id="cb64-11"><a href="#cb64-11"></a><span class="co">  pdf: default</span></span>
<span id="cb64-12"><a href="#cb64-12"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb64-13"><a href="#cb64-13"></a><span class="an">number-sections:</span><span class="co"> true</span></span>
<span id="cb64-14"><a href="#cb64-14"></a><span class="co">---</span></span>
<span id="cb64-15"><a href="#cb64-15"></a></span>
<span id="cb64-16"><a href="#cb64-16"></a><span class="fu"># Organisation</span></span>
<span id="cb64-17"><a href="#cb64-17"></a></span>
<span id="cb64-18"><a href="#cb64-18"></a><span class="fu">## Arbeitsverzeichnis festsetzen</span></span>
<span id="cb64-19"><a href="#cb64-19"></a></span>
<span id="cb64-20"><a href="#cb64-20"></a>quarto-executable-code-5450563D</span>
<span id="cb64-21"><a href="#cb64-21"></a></span>
<span id="cb64-22"><a href="#cb64-22"></a><span class="in">```r</span></span>
<span id="cb64-23"><a href="#cb64-23"></a><span class="co"># set working directory</span></span>
<span id="cb64-24"><a href="#cb64-24"></a><span class="fu">setwd</span>(<span class="st">&quot;D:/Seafile/main/teaching/2024_wuppertal/studis/uebungen&quot;</span>)</span>
<span id="cb64-25"><a href="#cb64-25"></a><span class="in">```</span></span>
<span id="cb64-26"><a href="#cb64-26"></a></span>
<span id="cb64-27"><a href="#cb64-27"></a><span class="fu">## Packages installieren und laden</span></span>
<span id="cb64-28"><a href="#cb64-28"></a></span>
<span id="cb64-29"><a href="#cb64-29"></a>quarto-executable-code-5450563D</span>
<span id="cb64-30"><a href="#cb64-30"></a></span>
<span id="cb64-31"><a href="#cb64-31"></a><span class="in">```r</span></span>
<span id="cb64-32"><a href="#cb64-32"></a><span class="co">#| echo: true</span></span>
<span id="cb64-33"><a href="#cb64-33"></a><span class="co">#| results: &quot;hide&quot;</span></span>
<span id="cb64-34"><a href="#cb64-34"></a><span class="co">#| warning: false</span></span>
<span id="cb64-35"><a href="#cb64-35"></a><span class="co"># Packages</span></span>
<span id="cb64-36"><a href="#cb64-36"></a>pkgs <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb64-37"><a href="#cb64-37"></a>  <span class="st">&quot;tidyverse&quot;</span>,</span>
<span id="cb64-38"><a href="#cb64-38"></a>  <span class="st">&quot;sjlabelled&quot;</span>, <span class="co"># for variable labels</span></span>
<span id="cb64-39"><a href="#cb64-39"></a>  <span class="st">&quot;plm&quot;</span>, <span class="co"># Panelregressionen</span></span>
<span id="cb64-40"><a href="#cb64-40"></a>  <span class="st">&quot;sjPlot&quot;</span> <span class="co"># um Regressionstabellen schön darzustellen</span></span>
<span id="cb64-41"><a href="#cb64-41"></a>) </span>
<span id="cb64-42"><a href="#cb64-42"></a></span>
<span id="cb64-43"><a href="#cb64-43"></a><span class="do">## Install uninstalled packages</span></span>
<span id="cb64-44"><a href="#cb64-44"></a><span class="fu">lapply</span>(pkgs[<span class="sc">!</span>(pkgs <span class="sc">%in%</span> <span class="fu">installed.packages</span>())], install.packages)</span>
<span id="cb64-45"><a href="#cb64-45"></a></span>
<span id="cb64-46"><a href="#cb64-46"></a><span class="do">## Load all packages to library</span></span>
<span id="cb64-47"><a href="#cb64-47"></a><span class="fu">lapply</span>(pkgs, library, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb64-48"><a href="#cb64-48"></a></span>
<span id="cb64-49"><a href="#cb64-49"></a><span class="in">```</span></span>
<span id="cb64-50"><a href="#cb64-50"></a></span>
<span id="cb64-51"><a href="#cb64-51"></a><span class="fu">## Daten einlesen</span></span>
<span id="cb64-52"><a href="#cb64-52"></a></span>
<span id="cb64-53"><a href="#cb64-53"></a>Wir arbeiten wieder mit dem Übungsdatensatz des SOEP (DOI:10.5684/soep.practice.v36). Es werden zwei Datensätze eingelesen. Der erste Datensatz enthalt die tatsächlichen Umfragedaten, der zweite Datensatz enthält die Variablenlabels.</span>
<span id="cb64-54"><a href="#cb64-54"></a></span>
<span id="cb64-55"><a href="#cb64-55"></a>quarto-executable-code-5450563D</span>
<span id="cb64-56"><a href="#cb64-56"></a></span>
<span id="cb64-57"><a href="#cb64-57"></a><span class="in">```r</span></span>
<span id="cb64-58"><a href="#cb64-58"></a><span class="co"># read data</span></span>
<span id="cb64-59"><a href="#cb64-59"></a>df <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;../daten/soep_uebung.csv&quot;</span>)</span>
<span id="cb64-60"><a href="#cb64-60"></a>df_labels <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;../daten/soep_labels.csv&quot;</span>)</span>
<span id="cb64-61"><a href="#cb64-61"></a></span>
<span id="cb64-62"><a href="#cb64-62"></a><span class="co"># Add variable labels</span></span>
<span id="cb64-63"><a href="#cb64-63"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(df_labels)) {</span>
<span id="cb64-64"><a href="#cb64-64"></a>  variable_name <span class="ot">&lt;-</span> df_labels<span class="sc">$</span>variable[i]</span>
<span id="cb64-65"><a href="#cb64-65"></a>  variable_label <span class="ot">&lt;-</span> df_labels<span class="sc">$</span>variable_label[i]</span>
<span id="cb64-66"><a href="#cb64-66"></a>  </span>
<span id="cb64-67"><a href="#cb64-67"></a>  <span class="co"># Apply the label to the corresponding column in df</span></span>
<span id="cb64-68"><a href="#cb64-68"></a>  df[[variable_name]] <span class="ot">&lt;-</span> <span class="fu">set_label</span>(df[[variable_name]], variable_label)</span>
<span id="cb64-69"><a href="#cb64-69"></a>}</span>
<span id="cb64-70"><a href="#cb64-70"></a><span class="co"># show variable labels</span></span>
<span id="cb64-71"><a href="#cb64-71"></a><span class="fu">get_label</span>(df)</span>
<span id="cb64-72"><a href="#cb64-72"></a><span class="in">```</span></span>
<span id="cb64-73"><a href="#cb64-73"></a></span>
<span id="cb64-74"><a href="#cb64-74"></a><span class="fu"># Datenaufbereitung</span></span>
<span id="cb64-75"><a href="#cb64-75"></a></span>
<span id="cb64-76"><a href="#cb64-76"></a>In dieser Übung möchten wir herausfinden, welche Faktoren mit Lebenszufriedenheit (lebensz_org) zusammenhängen. Denkbar wären zum Beispiel: Geschlecht (sex), Alter(alter), Anzahl an Kindern im Haushalt (anz_kind), Bildung (bildung) und Einkommen (einkommenj1).</span>
<span id="cb64-77"><a href="#cb64-77"></a></span>
<span id="cb64-78"><a href="#cb64-78"></a>Um die Analysen durchzuführen, müssen wir die Variablen erst einmal aufbereiten. Überprüfe bei jeder Variable,</span>
<span id="cb64-79"><a href="#cb64-79"></a></span>
<span id="cb64-80"><a href="#cb64-80"></a><span class="ss">-   </span>ob fehlende Werte als solche markiert sind</span>
<span id="cb64-81"><a href="#cb64-81"></a><span class="ss">-   </span>um welchen Typ es sich bei den Variablen hanelt und ob etwa eine Umwandlung erforderlich ist.</span>
<span id="cb64-82"><a href="#cb64-82"></a></span>
<span id="cb64-83"><a href="#cb64-83"></a><span class="fu">## Lebenszufriedenheit</span></span>
<span id="cb64-84"><a href="#cb64-84"></a></span>
<span id="cb64-85"><a href="#cb64-85"></a>quarto-executable-code-5450563D</span>
<span id="cb64-86"><a href="#cb64-86"></a></span>
<span id="cb64-87"><a href="#cb64-87"></a><span class="in">```r</span></span>
<span id="cb64-88"><a href="#cb64-88"></a><span class="fu">table</span>(df<span class="sc">$</span>lebensz_org, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span>
<span id="cb64-89"><a href="#cb64-89"></a></span>
<span id="cb64-90"><a href="#cb64-90"></a>df <span class="ot">=</span> df <span class="sc">%&gt;%</span></span>
<span id="cb64-91"><a href="#cb64-91"></a>  <span class="fu">mutate</span>(<span class="at">lz =</span> <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">[([0-9]+)</span><span class="sc">\\</span><span class="st">].*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, df<span class="sc">$</span>lebensz_org)))</span>
<span id="cb64-92"><a href="#cb64-92"></a></span>
<span id="cb64-93"><a href="#cb64-93"></a><span class="fu">table</span>(df<span class="sc">$</span>lz, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span>
<span id="cb64-94"><a href="#cb64-94"></a><span class="in">```</span></span>
<span id="cb64-95"><a href="#cb64-95"></a></span>
<span id="cb64-96"><a href="#cb64-96"></a><span class="fu">## Geschlecht</span></span>
<span id="cb64-97"><a href="#cb64-97"></a></span>
<span id="cb64-98"><a href="#cb64-98"></a>quarto-executable-code-5450563D</span>
<span id="cb64-99"><a href="#cb64-99"></a></span>
<span id="cb64-100"><a href="#cb64-100"></a><span class="in">```r</span></span>
<span id="cb64-101"><a href="#cb64-101"></a><span class="fu">table</span>(df<span class="sc">$</span>sex, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span>
<span id="cb64-102"><a href="#cb64-102"></a></span>
<span id="cb64-103"><a href="#cb64-103"></a>df <span class="ot">=</span> df <span class="sc">%&gt;%</span></span>
<span id="cb64-104"><a href="#cb64-104"></a>  <span class="fu">mutate</span>(<span class="at">female =</span> <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">[([0-9]+)</span><span class="sc">\\</span><span class="st">].*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, df<span class="sc">$</span>sex)))</span>
<span id="cb64-105"><a href="#cb64-105"></a></span>
<span id="cb64-106"><a href="#cb64-106"></a><span class="fu">table</span>(df<span class="sc">$</span>female, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span>
<span id="cb64-107"><a href="#cb64-107"></a><span class="in">```</span></span>
<span id="cb64-108"><a href="#cb64-108"></a></span>
<span id="cb64-109"><a href="#cb64-109"></a><span class="fu">## Alter</span></span>
<span id="cb64-110"><a href="#cb64-110"></a></span>
<span id="cb64-111"><a href="#cb64-111"></a>quarto-executable-code-5450563D</span>
<span id="cb64-112"><a href="#cb64-112"></a></span>
<span id="cb64-113"><a href="#cb64-113"></a><span class="in">```r</span></span>
<span id="cb64-114"><a href="#cb64-114"></a><span class="fu">table</span>(df<span class="sc">$</span>alter, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span>
<span id="cb64-115"><a href="#cb64-115"></a><span class="fu">class</span>(df<span class="sc">$</span>alter)</span>
<span id="cb64-116"><a href="#cb64-116"></a><span class="in">```</span></span>
<span id="cb64-117"><a href="#cb64-117"></a></span>
<span id="cb64-118"><a href="#cb64-118"></a><span class="fu">## Anzahl an Kindern im Haushalt</span></span>
<span id="cb64-119"><a href="#cb64-119"></a></span>
<span id="cb64-120"><a href="#cb64-120"></a>quarto-executable-code-5450563D</span>
<span id="cb64-121"><a href="#cb64-121"></a></span>
<span id="cb64-122"><a href="#cb64-122"></a><span class="in">```r</span></span>
<span id="cb64-123"><a href="#cb64-123"></a><span class="fu">table</span>(df<span class="sc">$</span>anz_kind, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span>
<span id="cb64-124"><a href="#cb64-124"></a><span class="fu">class</span>(df<span class="sc">$</span>anz_kind)</span>
<span id="cb64-125"><a href="#cb64-125"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(df<span class="sc">$</span>anz_kind))</span>
<span id="cb64-126"><a href="#cb64-126"></a><span class="in">```</span></span>
<span id="cb64-127"><a href="#cb64-127"></a></span>
<span id="cb64-128"><a href="#cb64-128"></a><span class="fu">## Bildung</span></span>
<span id="cb64-129"><a href="#cb64-129"></a></span>
<span id="cb64-130"><a href="#cb64-130"></a>quarto-executable-code-5450563D</span>
<span id="cb64-131"><a href="#cb64-131"></a></span>
<span id="cb64-132"><a href="#cb64-132"></a><span class="in">```r</span></span>
<span id="cb64-133"><a href="#cb64-133"></a><span class="fu">table</span>(df<span class="sc">$</span>bildung, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span>
<span id="cb64-134"><a href="#cb64-134"></a><span class="fu">class</span>(df<span class="sc">$</span>bildung)</span>
<span id="cb64-135"><a href="#cb64-135"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(df<span class="sc">$</span>bildung))</span>
<span id="cb64-136"><a href="#cb64-136"></a><span class="in">```</span></span>
<span id="cb64-137"><a href="#cb64-137"></a></span>
<span id="cb64-138"><a href="#cb64-138"></a><span class="fu">## Einkommen</span></span>
<span id="cb64-139"><a href="#cb64-139"></a></span>
<span id="cb64-140"><a href="#cb64-140"></a>quarto-executable-code-5450563D</span>
<span id="cb64-141"><a href="#cb64-141"></a></span>
<span id="cb64-142"><a href="#cb64-142"></a><span class="in">```r</span></span>
<span id="cb64-143"><a href="#cb64-143"></a><span class="fu">summary</span>(df<span class="sc">$</span>einkommenj1)</span>
<span id="cb64-144"><a href="#cb64-144"></a><span class="fu">class</span>(df<span class="sc">$</span>einkommenj1)</span>
<span id="cb64-145"><a href="#cb64-145"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(df<span class="sc">$</span>einkommenj1))</span>
<span id="cb64-146"><a href="#cb64-146"></a><span class="in">```</span></span>
<span id="cb64-147"><a href="#cb64-147"></a></span>
<span id="cb64-148"><a href="#cb64-148"></a><span class="fu">## Analysesample bilden</span></span>
<span id="cb64-149"><a href="#cb64-149"></a></span>
<span id="cb64-150"><a href="#cb64-150"></a>(a) Selektiere nur die Variablen, die wir brauchen</span>
<span id="cb64-151"><a href="#cb64-151"></a></span>
<span id="cb64-152"><a href="#cb64-152"></a>quarto-executable-code-5450563D</span>
<span id="cb64-153"><a href="#cb64-153"></a></span>
<span id="cb64-154"><a href="#cb64-154"></a><span class="in">```r</span></span>
<span id="cb64-155"><a href="#cb64-155"></a>df <span class="ot">=</span> df <span class="sc">%&gt;%</span></span>
<span id="cb64-156"><a href="#cb64-156"></a>  <span class="fu">select</span>(id,syear, lz,female, alter, anz_kind, bildung, einkommenj1)</span>
<span id="cb64-157"><a href="#cb64-157"></a><span class="in">```</span></span>
<span id="cb64-158"><a href="#cb64-158"></a></span>
<span id="cb64-159"><a href="#cb64-159"></a>(b) Nun bilden wir das Analysesample. Wir wenden &quot;listwise deletion&quot;.</span>
<span id="cb64-160"><a href="#cb64-160"></a></span>
<span id="cb64-161"><a href="#cb64-161"></a>quarto-executable-code-5450563D</span>
<span id="cb64-162"><a href="#cb64-162"></a></span>
<span id="cb64-163"><a href="#cb64-163"></a><span class="in">```r</span></span>
<span id="cb64-164"><a href="#cb64-164"></a>df_listwise <span class="ot">&lt;-</span> df[<span class="fu">complete.cases</span>(df[, <span class="fu">c</span>(<span class="st">&quot;lz&quot;</span>,<span class="st">&quot;female&quot;</span>, <span class="st">&quot;alter&quot;</span>, <span class="st">&quot;anz_kind&quot;</span>, <span class="st">&quot;bildung&quot;</span>, <span class="st">&quot;einkommenj1&quot;</span>)]), ]</span>
<span id="cb64-165"><a href="#cb64-165"></a><span class="in">```</span></span>
<span id="cb64-166"><a href="#cb64-166"></a></span>
<span id="cb64-167"><a href="#cb64-167"></a>(c) Wie viele Beobachtungen gehen uns verloren?</span>
<span id="cb64-168"><a href="#cb64-168"></a></span>
<span id="cb64-169"><a href="#cb64-169"></a>quarto-executable-code-5450563D</span>
<span id="cb64-170"><a href="#cb64-170"></a></span>
<span id="cb64-171"><a href="#cb64-171"></a><span class="in">```r</span></span>
<span id="cb64-172"><a href="#cb64-172"></a><span class="co"># Initialize a data frame to store the results</span></span>
<span id="cb64-173"><a href="#cb64-173"></a>results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb64-174"><a href="#cb64-174"></a>  <span class="at">Variable =</span> <span class="fu">character</span>(),</span>
<span id="cb64-175"><a href="#cb64-175"></a>  <span class="at">Cases_Remaining =</span> <span class="fu">integer</span>(),</span>
<span id="cb64-176"><a href="#cb64-176"></a>  <span class="at">Cases_Lost =</span> <span class="fu">integer</span>(),</span>
<span id="cb64-177"><a href="#cb64-177"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb64-178"><a href="#cb64-178"></a>)</span>
<span id="cb64-179"><a href="#cb64-179"></a></span>
<span id="cb64-180"><a href="#cb64-180"></a><span class="co"># Total number of rows initially</span></span>
<span id="cb64-181"><a href="#cb64-181"></a>initial_rows <span class="ot">&lt;-</span> <span class="fu">nrow</span>(df)</span>
<span id="cb64-182"><a href="#cb64-182"></a></span>
<span id="cb64-183"><a href="#cb64-183"></a><span class="co"># Iterate over each variable</span></span>
<span id="cb64-184"><a href="#cb64-184"></a><span class="cf">for</span> (var <span class="cf">in</span> <span class="fu">names</span>(df)) {</span>
<span id="cb64-185"><a href="#cb64-185"></a>  <span class="co"># Perform listwise deletion based on the current variable</span></span>
<span id="cb64-186"><a href="#cb64-186"></a>  remaining_rows <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">complete.cases</span>(df[, var, <span class="at">drop =</span> <span class="cn">FALSE</span>]))</span>
<span id="cb64-187"><a href="#cb64-187"></a>  </span>
<span id="cb64-188"><a href="#cb64-188"></a>  <span class="co"># Calculate cases lost</span></span>
<span id="cb64-189"><a href="#cb64-189"></a>  cases_lost <span class="ot">&lt;-</span> initial_rows <span class="sc">-</span> remaining_rows</span>
<span id="cb64-190"><a href="#cb64-190"></a>  </span>
<span id="cb64-191"><a href="#cb64-191"></a>  <span class="co"># Append to the results data frame</span></span>
<span id="cb64-192"><a href="#cb64-192"></a>  results <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb64-193"><a href="#cb64-193"></a>    results,</span>
<span id="cb64-194"><a href="#cb64-194"></a>    <span class="fu">data.frame</span>(</span>
<span id="cb64-195"><a href="#cb64-195"></a>      <span class="at">Variable =</span> var,</span>
<span id="cb64-196"><a href="#cb64-196"></a>      <span class="at">Cases_Remaining =</span> remaining_rows,</span>
<span id="cb64-197"><a href="#cb64-197"></a>      <span class="at">Cases_Lost =</span> cases_lost</span>
<span id="cb64-198"><a href="#cb64-198"></a>    )</span>
<span id="cb64-199"><a href="#cb64-199"></a>  )</span>
<span id="cb64-200"><a href="#cb64-200"></a>}</span>
<span id="cb64-201"><a href="#cb64-201"></a></span>
<span id="cb64-202"><a href="#cb64-202"></a>results</span>
<span id="cb64-203"><a href="#cb64-203"></a></span>
<span id="cb64-204"><a href="#cb64-204"></a></span>
<span id="cb64-205"><a href="#cb64-205"></a>df <span class="ot">&lt;-</span> df[<span class="fu">complete.cases</span>(df[, <span class="fu">c</span>(<span class="st">&quot;lz&quot;</span>,<span class="st">&quot;female&quot;</span>, <span class="st">&quot;alter&quot;</span>, <span class="st">&quot;anz_kind&quot;</span>, <span class="st">&quot;bildung&quot;</span>, <span class="st">&quot;einkommenj1&quot;</span>)]), ]</span>
<span id="cb64-206"><a href="#cb64-206"></a><span class="in">```</span></span>
<span id="cb64-207"><a href="#cb64-207"></a></span>
<span id="cb64-208"><a href="#cb64-208"></a><span class="fu"># Datenexploration</span></span>
<span id="cb64-209"><a href="#cb64-209"></a></span>
<span id="cb64-210"><a href="#cb64-210"></a><span class="fu">## Wieviele Personenjahre sind im Datensatz?</span></span>
<span id="cb64-211"><a href="#cb64-211"></a></span>
<span id="cb64-212"><a href="#cb64-212"></a>quarto-executable-code-5450563D</span>
<span id="cb64-213"><a href="#cb64-213"></a></span>
<span id="cb64-214"><a href="#cb64-214"></a><span class="in">```r</span></span>
<span id="cb64-215"><a href="#cb64-215"></a><span class="fu">nrow</span>(df)</span>
<span id="cb64-216"><a href="#cb64-216"></a><span class="in">```</span></span>
<span id="cb64-217"><a href="#cb64-217"></a></span>
<span id="cb64-218"><a href="#cb64-218"></a><span class="fu">## Wie viele Personen sind im Datensatz?</span></span>
<span id="cb64-219"><a href="#cb64-219"></a></span>
<span id="cb64-220"><a href="#cb64-220"></a>quarto-executable-code-5450563D</span>
<span id="cb64-221"><a href="#cb64-221"></a></span>
<span id="cb64-222"><a href="#cb64-222"></a><span class="in">```r</span></span>
<span id="cb64-223"><a href="#cb64-223"></a><span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>id))</span>
<span id="cb64-224"><a href="#cb64-224"></a></span>
<span id="cb64-225"><a href="#cb64-225"></a><span class="in">```</span></span>
<span id="cb64-226"><a href="#cb64-226"></a></span>
<span id="cb64-227"><a href="#cb64-227"></a><span class="fu">## Wieviele Personen nehmen pro Jahr teil?</span></span>
<span id="cb64-228"><a href="#cb64-228"></a></span>
<span id="cb64-229"><a href="#cb64-229"></a>quarto-executable-code-5450563D</span>
<span id="cb64-230"><a href="#cb64-230"></a></span>
<span id="cb64-231"><a href="#cb64-231"></a><span class="in">```r</span></span>
<span id="cb64-232"><a href="#cb64-232"></a><span class="fu">table</span>(df<span class="sc">$</span>syear) </span>
<span id="cb64-233"><a href="#cb64-233"></a><span class="in">```</span></span>
<span id="cb64-234"><a href="#cb64-234"></a></span>
<span id="cb64-235"><a href="#cb64-235"></a>Wir haben also ein sogenanntes &quot;unbalanced panel&quot;.</span>
<span id="cb64-236"><a href="#cb64-236"></a></span>
<span id="cb64-237"><a href="#cb64-237"></a><span class="fu">## Was ist das Durchschnittsalter im Jahr 2015</span></span>
<span id="cb64-238"><a href="#cb64-238"></a></span>
<span id="cb64-239"><a href="#cb64-239"></a>quarto-executable-code-5450563D</span>
<span id="cb64-240"><a href="#cb64-240"></a></span>
<span id="cb64-241"><a href="#cb64-241"></a><span class="in">```r</span></span>
<span id="cb64-242"><a href="#cb64-242"></a><span class="co"># Berechnung des Durchschnittsalters für das Jahr 2015</span></span>
<span id="cb64-243"><a href="#cb64-243"></a><span class="fu">mean</span>(df<span class="sc">$</span>alter[df<span class="sc">$</span>syear <span class="sc">==</span> <span class="dv">2015</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb64-244"><a href="#cb64-244"></a></span>
<span id="cb64-245"><a href="#cb64-245"></a><span class="co"># Alternative mit dplyr</span></span>
<span id="cb64-246"><a href="#cb64-246"></a>durchschnittsalter <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb64-247"><a href="#cb64-247"></a>  <span class="fu">filter</span>(syear <span class="sc">==</span> <span class="dv">2015</span>) <span class="sc">%&gt;%</span>       <span class="co"># Filtert die Daten für das Jahr 2015</span></span>
<span id="cb64-248"><a href="#cb64-248"></a>  <span class="fu">summarise</span>(<span class="at">mean_alter =</span> <span class="fu">mean</span>(alter, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span>  <span class="co"># Berechnet den Durchschnitt</span></span>
<span id="cb64-249"><a href="#cb64-249"></a>  <span class="fu">pull</span>(mean_alter)               <span class="co"># Extrahiert den berechneten Wert</span></span>
<span id="cb64-250"><a href="#cb64-250"></a></span>
<span id="cb64-251"><a href="#cb64-251"></a><span class="fu">cat</span>(<span class="st">&quot;Das Durchschnittsalter im Jahr 2015 beträgt:&quot;</span>, <span class="fu">round</span>(durchschnittsalter,<span class="dv">2</span>), <span class="st">&quot;Jahre.&quot;</span>)</span>
<span id="cb64-252"><a href="#cb64-252"></a><span class="in">```</span></span>
<span id="cb64-253"><a href="#cb64-253"></a></span>
<span id="cb64-254"><a href="#cb64-254"></a><span class="fu">## Welche Variablen sind zeitkonstant und welche zeitveränderlich?</span></span>
<span id="cb64-255"><a href="#cb64-255"></a></span>
<span id="cb64-256"><a href="#cb64-256"></a>quarto-executable-code-5450563D</span>
<span id="cb64-257"><a href="#cb64-257"></a></span>
<span id="cb64-258"><a href="#cb64-258"></a><span class="in">```r</span></span>
<span id="cb64-259"><a href="#cb64-259"></a><span class="co"># Analyse: Zeitkonstante und zeitveränderliche Variablen</span></span>
<span id="cb64-260"><a href="#cb64-260"></a></span>
<span id="cb64-261"><a href="#cb64-261"></a>variablen_analyse <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb64-262"><a href="#cb64-262"></a>  <span class="fu">mutate</span>(<span class="at">id2 =</span> id) <span class="sc">%&gt;%</span></span>
<span id="cb64-263"><a href="#cb64-263"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span>                        <span class="co"># Gruppiert die Daten nach ID</span></span>
<span id="cb64-264"><a href="#cb64-264"></a>  <span class="fu">summarise_all</span>(<span class="sc">~</span> <span class="fu">n_distinct</span>(.)) <span class="sc">%&gt;%</span>      <span class="co"># Zählt die Anzahl der einzigartigen Werte je ID</span></span>
<span id="cb64-265"><a href="#cb64-265"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), max))    <span class="co"># Nimmt das Maximum der einzigartigen Werte je Variable</span></span>
<span id="cb64-266"><a href="#cb64-266"></a></span>
<span id="cb64-267"><a href="#cb64-267"></a></span>
<span id="cb64-268"><a href="#cb64-268"></a><span class="co"># Ergebnis interpretieren</span></span>
<span id="cb64-269"><a href="#cb64-269"></a>zeitkonstant <span class="ot">&lt;-</span> <span class="fu">names</span>(variablen_analyse)[variablen_analyse <span class="sc">==</span> <span class="dv">1</span>]  <span class="co"># Variablen mit nur einem Wert je ID</span></span>
<span id="cb64-270"><a href="#cb64-270"></a>zeitveraenderlich <span class="ot">&lt;-</span> <span class="fu">names</span>(variablen_analyse)[variablen_analyse <span class="sc">&gt;</span> <span class="dv">1</span>]  <span class="co"># Variablen mit mehreren Werten je ID</span></span>
<span id="cb64-271"><a href="#cb64-271"></a></span>
<span id="cb64-272"><a href="#cb64-272"></a><span class="co"># Ausgabe</span></span>
<span id="cb64-273"><a href="#cb64-273"></a><span class="fu">cat</span>(<span class="st">&quot;Zeitkonstante Variablen:</span><span class="sc">\n</span><span class="st">&quot;</span>,zeitkonstant )</span>
<span id="cb64-274"><a href="#cb64-274"></a></span>
<span id="cb64-275"><a href="#cb64-275"></a></span>
<span id="cb64-276"><a href="#cb64-276"></a><span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">Zeitveränderliche Variablen:</span><span class="sc">\n</span><span class="st">&quot;</span>, zeitveraenderlich)</span>
<span id="cb64-277"><a href="#cb64-277"></a></span>
<span id="cb64-278"><a href="#cb64-278"></a><span class="in">```</span></span>
<span id="cb64-279"><a href="#cb64-279"></a></span>
<span id="cb64-280"><a href="#cb64-280"></a><span class="fu">## Wie viele Personen nahmen an allen fünf Wellen teil? Und wie viele Jahre nahmen Personen durchschnittlich teil?</span></span>
<span id="cb64-281"><a href="#cb64-281"></a></span>
<span id="cb64-282"><a href="#cb64-282"></a>quarto-executable-code-5450563D</span>
<span id="cb64-283"><a href="#cb64-283"></a></span>
<span id="cb64-284"><a href="#cb64-284"></a><span class="in">```r</span></span>
<span id="cb64-285"><a href="#cb64-285"></a><span class="co"># Anteil der Personen, die an allen fünf Wellen teilgenommen haben</span></span>
<span id="cb64-286"><a href="#cb64-286"></a>data_summary <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb64-287"><a href="#cb64-287"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span></span>
<span id="cb64-288"><a href="#cb64-288"></a>  <span class="fu">summarize</span>(<span class="at">years_observed =</span> <span class="fu">n_distinct</span>(syear))</span>
<span id="cb64-289"><a href="#cb64-289"></a><span class="fu">table</span>(data_summary<span class="sc">$</span>years_observed)  <span class="co"># Verteilung der Beobachtungsjahre</span></span>
<span id="cb64-290"><a href="#cb64-290"></a></span>
<span id="cb64-291"><a href="#cb64-291"></a><span class="co"># Durchschnittliche Beobachtungsjahre pro Person</span></span>
<span id="cb64-292"><a href="#cb64-292"></a><span class="fu">mean</span>(data_summary<span class="sc">$</span>years_observed)</span>
<span id="cb64-293"><a href="#cb64-293"></a><span class="in">```</span></span>
<span id="cb64-294"><a href="#cb64-294"></a></span>
<span id="cb64-295"><a href="#cb64-295"></a><span class="fu"># Regressionen</span></span>
<span id="cb64-296"><a href="#cb64-296"></a></span>
<span id="cb64-297"><a href="#cb64-297"></a><span class="fu">## Schätze ein POLS Modell</span></span>
<span id="cb64-298"><a href="#cb64-298"></a></span>
<span id="cb64-299"><a href="#cb64-299"></a>... und interepretiere die Koeffizienten.</span>
<span id="cb64-300"><a href="#cb64-300"></a></span>
<span id="cb64-301"><a href="#cb64-301"></a>quarto-executable-code-5450563D</span>
<span id="cb64-302"><a href="#cb64-302"></a></span>
<span id="cb64-303"><a href="#cb64-303"></a><span class="in">```r</span></span>
<span id="cb64-304"><a href="#cb64-304"></a>m_pol <span class="ot">&lt;-</span> <span class="fu">plm</span>(lz <span class="sc">~</span> female <span class="sc">+</span> alter <span class="sc">+</span> anz_kind <span class="sc">+</span> bildung <span class="sc">+</span> einkommenj1, <span class="at">data =</span> df,</span>
<span id="cb64-305"><a href="#cb64-305"></a>           <span class="at">index =</span> <span class="fu">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;syear&quot;</span>),</span>
<span id="cb64-306"><a href="#cb64-306"></a>           <span class="at">effect =</span> <span class="st">&quot;individual&quot;</span>, <span class="at">model =</span> <span class="st">&quot;pooling&quot;</span>)</span>
<span id="cb64-307"><a href="#cb64-307"></a><span class="fu">tab_model</span>(m_pol,</span>
<span id="cb64-308"><a href="#cb64-308"></a>          <span class="at">dv.labels =</span> <span class="fu">paste</span>(<span class="st">&quot;POLS Model&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb64-309"><a href="#cb64-309"></a><span class="in">```</span></span>
<span id="cb64-310"><a href="#cb64-310"></a></span>
<span id="cb64-311"><a href="#cb64-311"></a><span class="fu">## Schätze ein BE Modell</span></span>
<span id="cb64-312"><a href="#cb64-312"></a></span>
<span id="cb64-313"><a href="#cb64-313"></a>... und interepretiere die Koeffizienten.</span>
<span id="cb64-314"><a href="#cb64-314"></a></span>
<span id="cb64-315"><a href="#cb64-315"></a>quarto-executable-code-5450563D</span>
<span id="cb64-316"><a href="#cb64-316"></a></span>
<span id="cb64-317"><a href="#cb64-317"></a><span class="in">```r</span></span>
<span id="cb64-318"><a href="#cb64-318"></a>m_be <span class="ot">&lt;-</span> <span class="fu">plm</span>(lz <span class="sc">~</span> female <span class="sc">+</span> alter <span class="sc">+</span> anz_kind <span class="sc">+</span> bildung <span class="sc">+</span> einkommenj1, <span class="at">data =</span> df,</span>
<span id="cb64-319"><a href="#cb64-319"></a>           <span class="at">index =</span> <span class="fu">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;syear&quot;</span>),</span>
<span id="cb64-320"><a href="#cb64-320"></a>           <span class="at">effect =</span> <span class="st">&quot;individual&quot;</span>, <span class="at">model =</span> <span class="st">&quot;between&quot;</span>)</span>
<span id="cb64-321"><a href="#cb64-321"></a><span class="fu">tab_model</span>(m_be,</span>
<span id="cb64-322"><a href="#cb64-322"></a>          <span class="at">dv.labels =</span> <span class="fu">paste</span>(<span class="st">&quot;BE Model&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb64-323"><a href="#cb64-323"></a><span class="in">```</span></span>
<span id="cb64-324"><a href="#cb64-324"></a></span>
<span id="cb64-325"><a href="#cb64-325"></a><span class="fu">## Schätze ein FE Modell</span></span>
<span id="cb64-326"><a href="#cb64-326"></a></span>
<span id="cb64-327"><a href="#cb64-327"></a>... und interepretiere die Koeffizienten.</span>
<span id="cb64-328"><a href="#cb64-328"></a></span>
<span id="cb64-329"><a href="#cb64-329"></a>quarto-executable-code-5450563D</span>
<span id="cb64-330"><a href="#cb64-330"></a></span>
<span id="cb64-331"><a href="#cb64-331"></a><span class="in">```r</span></span>
<span id="cb64-332"><a href="#cb64-332"></a>m_fe <span class="ot">&lt;-</span> <span class="fu">plm</span>(lz <span class="sc">~</span> female <span class="sc">+</span> alter <span class="sc">+</span> anz_kind <span class="sc">+</span> bildung <span class="sc">+</span> einkommenj1 , <span class="at">data =</span> df,</span>
<span id="cb64-333"><a href="#cb64-333"></a>           <span class="at">index =</span> <span class="fu">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;syear&quot;</span>),</span>
<span id="cb64-334"><a href="#cb64-334"></a>           <span class="at">effect =</span> <span class="st">&quot;individual&quot;</span>, <span class="at">model =</span> <span class="st">&quot;within&quot;</span>)</span>
<span id="cb64-335"><a href="#cb64-335"></a><span class="co"># Retrieve the number of groups</span></span>
<span id="cb64-336"><a href="#cb64-336"></a>num_groups <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(<span class="fu">index</span>(m_fe)[, <span class="st">&quot;id&quot;</span>]))</span>
<span id="cb64-337"><a href="#cb64-337"></a><span class="fu">tab_model</span>(m_fe,</span>
<span id="cb64-338"><a href="#cb64-338"></a>          <span class="at">dv.labels =</span> <span class="fu">paste</span>(<span class="st">&quot;FE Model (&quot;</span>, num_groups, <span class="st">&quot; Groups)&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb64-339"><a href="#cb64-339"></a><span class="in">```</span></span>
<span id="cb64-340"><a href="#cb64-340"></a></span>
<span id="cb64-341"><a href="#cb64-341"></a><span class="fu">## Schätze ein RE Modell</span></span>
<span id="cb64-342"><a href="#cb64-342"></a></span>
<span id="cb64-343"><a href="#cb64-343"></a>... und interepretiere die Koeffizienten.</span>
<span id="cb64-344"><a href="#cb64-344"></a></span>
<span id="cb64-345"><a href="#cb64-345"></a>quarto-executable-code-5450563D</span>
<span id="cb64-346"><a href="#cb64-346"></a></span>
<span id="cb64-347"><a href="#cb64-347"></a><span class="in">```r</span></span>
<span id="cb64-348"><a href="#cb64-348"></a>m_re <span class="ot">&lt;-</span> <span class="fu">plm</span>(lz <span class="sc">~</span> female <span class="sc">+</span> alter <span class="sc">+</span> anz_kind <span class="sc">+</span> bildung <span class="sc">+</span> einkommenj1, <span class="at">data =</span> df,</span>
<span id="cb64-349"><a href="#cb64-349"></a>           <span class="at">index =</span> <span class="fu">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;syear&quot;</span>),</span>
<span id="cb64-350"><a href="#cb64-350"></a>           <span class="at">effect =</span> <span class="st">&quot;individual&quot;</span>, <span class="at">model =</span> <span class="st">&quot;random&quot;</span>)</span>
<span id="cb64-351"><a href="#cb64-351"></a><span class="co"># Retrieve the number of groups</span></span>
<span id="cb64-352"><a href="#cb64-352"></a>num_groups <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(<span class="fu">index</span>(m_re)[, <span class="st">&quot;id&quot;</span>]))</span>
<span id="cb64-353"><a href="#cb64-353"></a><span class="fu">tab_model</span>(m_re,</span>
<span id="cb64-354"><a href="#cb64-354"></a>          <span class="at">dv.labels =</span> <span class="fu">paste</span>(<span class="st">&quot;RE Model (&quot;</span>, num_groups, <span class="st">&quot; Groups)&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb64-355"><a href="#cb64-355"></a><span class="in">```</span></span>
<span id="cb64-356"><a href="#cb64-356"></a></span>
<span id="cb64-357"><a href="#cb64-357"></a><span class="fu">## Vergleich</span></span>
<span id="cb64-358"><a href="#cb64-358"></a></span>
<span id="cb64-359"><a href="#cb64-359"></a>Vergleiche die vier Modelle.</span>
<span id="cb64-360"><a href="#cb64-360"></a></span>
<span id="cb64-361"><a href="#cb64-361"></a>quarto-executable-code-5450563D</span>
<span id="cb64-362"><a href="#cb64-362"></a></span>
<span id="cb64-363"><a href="#cb64-363"></a><span class="in">```r</span></span>
<span id="cb64-364"><a href="#cb64-364"></a><span class="fu">tab_model</span>(m_pol, m_be, m_fe , m_re, <span class="at">show.ci =</span> <span class="cn">FALSE</span>,</span>
<span id="cb64-365"><a href="#cb64-365"></a>          <span class="at">dv.labels =</span> <span class="fu">c</span>(<span class="st">&quot;POLS&quot;</span>, <span class="st">&quot;BE&quot;</span>, <span class="st">&quot;FE&quot;</span>, <span class="st">&quot;RE&quot;</span>))</span>
<span id="cb64-366"><a href="#cb64-366"></a><span class="in">```</span></span>
<span id="cb64-367"><a href="#cb64-367"></a></span>
<span id="cb64-368"><a href="#cb64-368"></a>a)  Warum wird im FE kein Koeffizient für *female* geschätzt?</span>
<span id="cb64-369"><a href="#cb64-369"></a></span>
<span id="cb64-370"><a href="#cb64-370"></a>b)  Warum ist die Anzahl an Beobachtungen im BE Modell kleiner als die Anzahl an Beobachtungen in den anderen Modellen?</span>
<span id="cb64-371"><a href="#cb64-371"></a></span>
<span id="cb64-372"><a href="#cb64-372"></a><span class="fu">## Hausman Test</span></span>
<span id="cb64-373"><a href="#cb64-373"></a></span>
<span id="cb64-374"><a href="#cb64-374"></a>Sollen wir das RE oder das FE Modell nutzen? Führe einen Hausman Test durch. Wie entscheidest Du Dich?</span>
<span id="cb64-375"><a href="#cb64-375"></a></span>
<span id="cb64-376"><a href="#cb64-376"></a>quarto-executable-code-5450563D</span>
<span id="cb64-377"><a href="#cb64-377"></a></span>
<span id="cb64-378"><a href="#cb64-378"></a><span class="in">```r</span></span>
<span id="cb64-379"><a href="#cb64-379"></a><span class="fu">phtest</span>(m_fe, m_re)</span>
<span id="cb64-380"><a href="#cb64-380"></a><span class="in">```</span></span>
<span id="cb64-381"><a href="#cb64-381"></a></span>
<span id="cb64-382"><a href="#cb64-382"></a><span class="fu">## Kausalanalyse</span></span>
<span id="cb64-383"><a href="#cb64-383"></a></span>
<span id="cb64-384"><a href="#cb64-384"></a>Wir sind am kausalen Effekt von Einkommen auf Lebenszufriedenheit interessiert. Auf welche Variablen sollten wir kontrollieren und auf welche nicht? Nenne Beispiele für mögliche confounder, collider und Variablen, die zu overcontrol führen. Begründe die Auswahl der Variablen jeweils in einem Satz. Es können durchaus Variablen genannt werden, die **nicht** im Datensatz enthalten sind.</span>
<span id="cb64-385"><a href="#cb64-385"></a></span>
<span id="cb64-386"><a href="#cb64-386"></a><span class="fu"># Render</span></span>
<span id="cb64-387"><a href="#cb64-387"></a></span>
<span id="cb64-388"><a href="#cb64-388"></a>Wandle dieses Dokument in ein PDF und ein HTML Dokument um.</span>
<span id="cb64-389"><a href="#cb64-389"></a></span>
<span id="cb64-390"><a href="#cb64-390"></a><span class="fu"># Weiterführende Literatur</span></span>
<span id="cb64-391"><a href="#cb64-391"></a></span>
<span id="cb64-392"><a href="#cb64-392"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">R for Data Science</span><span class="co">](https://r4ds.had.co.nz/)</span></span>
<span id="cb64-393"><a href="#cb64-393"></a><span class="ss">-   </span>https://ruettenauer.github.io/Panel-Data-Analysis/</span></code></pre></div>
</div>
</section>

</main> <!-- /main -->
<script id = "quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a  href="/slides/2_seminar.html" class="pagination-link" aria-label="2 - Seminar  (Paneldaten)">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">2 - Seminar  (Paneldaten)</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a  href="/slides/3_seminar.html" class="pagination-link" aria-label="3 - Seminar  (Ereignisdaten)">
        <span class="nav-page-text">3 - Seminar  (Ereignisdaten)</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <div class='footer-contents'>&copy; Copyright 2024, Daria Tisch</div>  
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <div class='footer-contents'>This page is built with 💙 and [Quarto](https://quarto.org/).</div>  
    </div>
  </div>
</footer>

</body>

</html>
